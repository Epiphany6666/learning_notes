# 一、小程序基础知识

# 2.初识微信小程序



**什么是微信小程序（Mini programs）**

<img src="assets/01.微信小程序.gif" style="zoom:28%; border: 1px solid #ccc" />

微信小程序是一种运行在微信内部的 轻量级 应用程序。

在使用小程序时 不需要下载安装，用户 扫一扫 或 搜一下 即可打开应用。它也体现了 “用完即走” 的理念，用户不用关心安装太多应用的问题。它实现了应用“触手可及”的梦想，应用无处不在，随时可用，但又 无须安装卸载。

<img src="assets/通过和 App 对比引出小程特点.png" style="zoom:80%; border: 1px solid #ccc" />

**特点**:

小程序的四大特性：无须安装、用完即走、无须卸载、触手可及

1. 无须安装：体积小，用户感知不到下载的过程
2. 触手可及：用户 扫一扫 或 搜一下 即可打开应用，通过下拉能访问使用的小程序
3. 用完即走，无须卸载

---

# 3. 微信小程序账号注册

小程序开发 与 网页开发不一样，在开始微信小程序开发之前，需要访问 [微信公众平台](https://mp.weixin.qq.com/)，注册一个微信小程序账号。

在拥有了小程序的账号以后，我们才可以开发和管理小程序，后续可以通过该账号进行开发信息的设置、成员的添加，也可以用该账号查看、运营小程序的相关数据。

> 📌 **注意事项**：
>
> 在申请账号前，我们需要先准备一个邮箱，该邮箱要求：
>
> 1️⃣ 未被微信公众平台注册❗
>
> 2️⃣ 未被微信开放平台注册❗
>
> 3️⃣ **未被个人微信号绑定过 ！**如果被绑定了需要解绑 或 使用其他邮箱 ❗

1. 打开 [微信公众平台](https://mp.weixin.qq.com/)，点击立即注册

   

   <img src="assets/02-立即注册.png" style="zoom:60%; border: 1px solid #ccc" />

   

2. 选择注册的帐号类型，在这里我们需要 **选择小程序**

   

   <img src="assets/03-选择类型.png" style="zoom:63%; border: 1px solid #ccc" />

   ![image-20240315204338945](assets/image-20240315204338945.png)

   

3. 输入账号信息

   

   <img src="assets/04-账号信息.png" style="zoom:60%; border: 1px solid #ccc" />

   

4. 邮箱激活，需要进入邮箱进行激活

   

   <img src="assets/05-邮箱激活.png" style="zoom:60%;  border: 1px solid #ccc" />

   

   <img src="assets/06-账号激活.png" style="zoom:43%; border: 1px solid #ccc" />

   

5. 信息登记，注册类型 (需要选择中国大陆和个人，企业其他需要资质认证)

   

   <img src="assets/07-信息登记-1710506760237.png" style="zoom:51%; border: 1px solid #ccc" />

   

6. 主体信息登记与确认

   > 📌 注意:
   >
   > ​    在进行管理员身份验证的时候，推荐使用自已的微信进行扫码，
   >
   > ​    将自已设置为小程序账号的管理员，方便以后对小程序进行开发、成员等相关的设置

   <img src="assets/08-主体信息登记.png" style="zoom:52%; border: 1px solid #ccc" />

   

   <img src="assets/08-主体信息登记-确认.png" style="zoom:54%; border: 1px solid #ccc" />

   

7. 小程序注册完成，点击前往小程序，即可进入小程序后台

    

   <img src="assets/09-注册完成.png" style="zoom:54%; border: 1px solid #ccc" />

   

   <img src="assets/10-小程序后台.png" style="zoom:46.5%; border: 1px solid #ccc" />

---

# 4.完善小程序账号信息

在完成小程序账号的注册后，你便可以打开微信公众平台对小程序账号进行一些设置，这是你开发前的准备工作，完善后才可以进入后续的开发步骤，这是因为小程序在后续进行提交审核的时候，小程序账号信息是必填项，因此在注册小程序以后，需要补充小程序的基本信息，如名称、图标、描述等。

> 📌 **注意事项**：
>
> ​	在填写小程序类目时**不要选择游戏类型**，否则微信官方将会视为小游戏开发 ❗

<img src="assets/11-完善小程序信息.png" style="zoom:60%; border: 1px solid #ccc" />



点击 **前往填写**，填写小程序基本信息即可

<img src="assets/12-填写小程序信息.png" style="zoom:75%; border: 1px solid #ccc" />



点击 **前往设置** , 设置小程序信息

![image-20240315205107772](assets/image-20240315205107772.png)

![image-20240315210159386](assets/image-20240315210159386.png)



**补充小程序类目**

![image-20240315210228453](assets/image-20240315210228453.png)

1. 点击右上角添加类目

   <img src="assets/13-添加类目.png"  style="zoom:68%; border: 1px solid #ccc" />



2. 管理员授权

   

   <img src="http://8.131.91.46:6677/mina/base/14-管理员验证.png" style="zoom:63%; border: 1px solid #ccc" />

   

3. 手机微信进行认证

  

   <img src="http://8.131.91.46:6677/mina/base/015-资质使用确认.png" style="zoom:20%; border: 1px solid #ccc" />

   

4. 添加小程序类目，<font color="red">**注意：选择类目的时候不要选择小游戏类目 ！！！！**</font>，否则微信官方会视为小游戏开发，但我们目前学习的是小程序开发。

<img src="http://8.131.91.46:6677/mina/base/018-类目选择注意事项.png"  style="zoom:80%; border: 1px solid #ccc" />

<img src="http://8.131.91.46:6677/mina/base/017-类目选择注意事项.png" style="zoom:80%; border: 1px solid #ccc" />

然后点击左上角的微信小程序图标，返回微信公众后台

![image-20240315210453033](assets/image-20240315210453033.png)



下面的小程序备案和微信认证，需要以后自己的小程序上线之前打开微信公众平台来进行相关设置。

![image-20240315210518285](assets/image-20240315210518285.png)



## 更改小程序信息 / 类目

点击设置

![image-20240315210652153](assets/image-20240315210652153.png)

![image-20240315210713785](assets/image-20240315210713785.png)

---

# 5.项目成员和体验成员

在公司中开发运营一个小程序，需要产品测试、研发、运营等各部门来进行紧密的配合。为了方便对各部门人员的管理，小程序就提供了两种不同的成员角色：**项目成员** 和 **体验成员**。

**项目成员**：参与小程序开发、运营的成员，可登陆小程序管理后台，包括运营者、开发者及数据分析者，我们以后在开发中属于开发者，因此属于项目成员。项目成员以后可以登录微信公众后台。微信小程序的管理员可在“成员管理”中添加、删除项目成员，并设置项目成员的角色。

**体验成员**：参与小程序内测体验的成员，例如产品经理例如测试。体验成员可使用体验版小程序，但不属于项目成员。管理员及项目成员均可添加、删除体验成员。

目前我们是个人开发者，所以可以添加15个项目成员和15个体验成员。但是以后在公司中，如果是公司的账号，是可以添加90个项目成员以及90个体验成员。

<img src="assets/成员管理.jpg" style="zoom:80%; border: 1px solid #ccc" />

添加项目成员

![image-20240315211433059](assets/image-20240315211433059.png)

微信号这里输入的必须是微信号，而不能是手机号！

权限选择开发权限，以后在公司中就是开发权限。如果是运营人员，就是运营者权限；如果是数据分析者，就是数据分析者权限。

<img src="assets/添加成员.jpg" style="zoom:80%; border: 1px solid #ccc" />

在选择好权限之后，点击`确认添加`，这时候又会弹出一个二维码，需要管理员来进行身份认证。



**删除成员**

点击右上角的编辑按钮

![](assets/202403152125595.png)

然后将鼠标移至需要删除的成员上面，就会出现一个删除的图表，点击删除即可

![image-20240315212733114](assets/image-20240315212733114.png)

体验成员同理。

---

# 6. 小程序开发者 ID

小程序的开发者账号是免费的，只要开发者满足开发资质就可以免费注册，并且会获得对应的开发者 ID

一个完整的开发者 ID 由 **<font color="red">小程序 ID（AppID）</font>**和一个 **<font color="red">小程序密钥（AppSecret）</font>**组成。



**小程序 ID 即 AppId**  是小程序在整个微信账号体系内的唯一身份凭证，类似于身份证号或者银行卡号。后续在很多地方都会用到，例如：新建小程序项目、真机调试、发布小程序等操作时，必须有小程序 ID。

**小程序密钥** 是开发者对小程序拥有所有权的凭证，类似于银行卡密码。在进行 微信登录、微信支付，或进行发送消息等高级操作时会使用到。



在微信公众后台，单击左侧开发标签，选择 "开发管理"，在新的页面中点击 "开发设置"，就可以看到开发者 ID 信息。请妥善保管你的小程序 ID 和小程序密钥，在后续的开发中会经常使用到，获取位置见下图：

<img src="http://8.131.91.46:6677/mina/base/019-开发管理.png" style="zoom:80%;" />

如果已经生成过小程序秘钥，则小程序秘钥后面的按钮会变成重置。

![image-20240315213247807](assets/image-20240315213247807.png)

小程序ID会明文展示，但小程序秘钥并没有任何东西。这是因为微信官方处于安全的角度出发，并没有进行明文展示。如果在开发中需要使用到小程序秘钥，可以点击后面的生成，或者重置，在弹框里面就可以看见自己的秘钥，复制之后就可以进行使用了

![image-20240315213138442](assets/image-20240315213138442.png)

我们以后在开发中使用最多的是小程序ID。秘诀：在桌面上新建一个文本文件，然后将自己的小程序ID粘贴进去，这样就不需要每次都打开微信公众号后台进行查看了。

---

# 7. 微信开发者工具

微信小程序只能运行在微信中，在脱离微信后，微信小程序将不能进行运行和使用，也就是说微信小程序它不能运行在浏览器中，我们不能通过浏览器来运行和调试小程序，但我们在开发过程中就无可避免的需要对微信小程序进行调试，这时候该怎么办呢？

为了帮助开发者简单和高效地开发和调试微信小程序，微信官方提供了 [微信开发者工具](https://developers.weixin.qq.com/miniprogram/dev/devtools/download.html)，利用开发者工具可以很方便地进行小程序开发、代码查看以及编辑、预览和发布等功能。

在 [微信开发者工具](https://developers.weixin.qq.com/miniprogram/dev/devtools/download.html) 下载页面，可以看到微信开发者工具包含三个版本：

1. 稳定版：稳定性高，**开发中一般推荐大家使用稳定版本**
2. 预发布版：稳定性尚可，一般包含新的、大的特性，这些特性通过了内部测试
3. 开发版：稳定性差，主要用于尽快修复缺陷和敏捷上线小的特性，如果想体验新特性，可以使用这个版本

> 📌 **注意事项**：
>
> ​	微信开发者工具必须联网使用 ❗
>
> 如果没有联网，或者网断了，那么在开发中都会出现一些问题。



<img src="assets/020-微信开发者工具版本.png" style="zoom:70%; border: 1px solid #ccc" />

选择合适的版本进行下载，在下载完成后，双击下载好的微信开发者工具安装包，根据引导点击下一步、我接受、直至安装完成。第一次使用微信开发者工具的时候，需要使用手机微信扫码登录，登录成功即可进入项目选择界面

<img src="assets/021-扫码登录.png" style="zoom:67%; border: 1px solid #cccc" />

<img src="assets/023-小程序登录成功.png" style="zoom:70%; border: 1px solid #ccc" />

---

# 8. 创建小程序项目

**创建项目**

使用小程序开发者工具创建一个新的项目，步骤如下：

1. 打开微信开发者工具，左侧选择小程序，点击 + 号即可新建项目。默认情况下选择的就是小程序。

   

   <img src="assets/024-创建项目.png" style="zoom:60%; border: 1px solid #ccc" />

   

2. 在弹出的新页面，填写项目信息

   - 项目名称：输入项目名称
   - 目录：选择小程序开发文件夹
   - AppID：填写自己申请的小程序 AppID
   - 开发模式：选择小程序
   - 后端服务：选择 **不使用云服务**
   - 模板选择：选择 **不使用模板**

   注意项目目录的结尾仍需加上项目名称，因为小程序创建项目是不会自动帮你生成根项目目录的。

   <img src="assets/image-20240315215039809.png" alt="image-20240315215039809" style="zoom: 50%;" />

   <img src="assets/025-创建项目.png" style="zoom:70%; border: 1px solid #ccc" />

   小程序的目录建议是空目录，否则官方会有提示，见下图

   <img src="assets/026-目录不为空.png" style="zoom:70%; border: 1px solid #ccc" />

   

3. 点击确定，如果能够看到小程序的开发主界面，说明小程序项目已经创建成功

   

   <img src="assets/027-第一个小程序项目.png" style="zoom:60%; border-right: 1px solid #ccc" />



## 开发者工具设置

为了后续高效的对小程序项目进行开发，我们需要对微信开发者工具进行一些个性化的设置，例如：设置模拟器位置、编辑器主题、编辑区行高等，当然你可以继续使用官方默认的，也可以按照自己的喜好设置，设置步骤如下：

1. 将小程序模拟器移动右侧：点击菜单栏的 视图 ➡ 外观 ➡ 将模拟器移到右侧，小程序模拟器即可调整到右侧

   <img src="assets/028-模拟器位置.png" style="zoom:80%; border: 1px solid #ccc" />

   

   <img src="assets/029-模拟器位置.png" style="zoom:80%; border: 1px solid #ccc" />

   

2. 小程序主题设置，点击菜单栏的 设置 ➡ 外观设置 ➡ 在弹框中将主题和调试工具选择为深色

   <img src="assets/030-主题设置.png" style="zoom:80%; border: 1px solid #ccc" />

   

   <img src="assets/031-主题设置.png" style="zoom:80%; border: 1px solid #ccc" />

   

3. 编辑区的设置，点击菜单栏的 设置 ➡ 编辑器设置 ➡ 按照自己的喜好调整行距和字号，或者其他设置

   <img src="assets/032-编辑器设置.png" style="zoom:80%; border: 1px solid #ccc" />

---

# 9. 小程序目录结构和文件介绍

在将小程序项目创建好以后，我们先来熟悉小程序项目的目录结构，如下图：

<img src="http://8.131.91.46:6677/mina/base/033-小程序目录.png" style="zoom:80%; border: 1px solid #ccc" />

一个完整的小程序项目分为两个部分：**主体文件**、**页面文件**

**主体文件** 又称小程序全局文件，顾名思义，全局文件能够作用于整个小程序，影响到小程序的每个页面，且**主体文件必须放到项目的根目录下**，主要由三部分组成：

> 📌 **注意事项**：
>
> ​	  主体文件的名字必须是 app，**app.js 和 app.json 文件是必须的**！

|  文件名  |                             作用                             | 是否必须 |
| :------: | :----------------------------------------------------------: | :------: |
|  app.js  | 小程序入口文件，可以在这个.js文件中去存放一些全局的逻辑，来定义一些全局共享的数据 |   必须   |
| app.json |                     小程序的全局配置文件                     |   必须   |
| app.wxss |   小程序的全局样式，类似于网页开发中的.css，是一个样式文件   |  非必须  |



**页面文件** 是每个页面所需的文件，小程序页面文件都存放在 pages 目录下，一个页面一个文件夹，每个页面通常由四个文件组成，每个文件只对当前页面有效：

| 文件名 |   作用   | 是否必须 |
| :----: | :------: | :------: |
|  .js   | 页面逻辑 |   必须   |
| .wxml  | 页面结构 |   必须   |
| .wxss  | 页面样式 |  非必须  |
| .json  | 页面配置 |  非必须  |

> 📌 **注意事项**：
>
> 1. 页面文件，wxss、json 文件能够覆盖主体文件中的样式和配置
> 2. 强烈建议：页面文件夹名称和页面文件名称要保持一致 感叹号



新建小程序文件和文件夹作用清单：

```shell
├─pages	                    ➡ 小程序页面存放目录
│
│  ├─index				   ➡ index 文件夹代表是 index 页面所需的文件
│  │      index.js          ➡ index 页面逻辑
│  │      index.json        ➡ index 页面配置
│  │      index.wxml        ➡ index 页面结构
│  │      index.wxss        ➡ index 页面样式
│  .eslintrc.js              ➡ Eslint 配置文件
│  app.js                    ➡ 小程序入口，即打开小程序首页执行的项目
│  app.json                  ➡ 小程序的全局配置
│  app.wxss                  ➡ 小程序的全局样式
│  project.config.json       ➡ 小程序开发者工具配置
│  project.private.config.json
│  sitemap.json              ➡ 小程序搜索优化

```









### 10. 如何调试小程序



在进行项目开发的时候，不可避免的需要进行调试，那么如何调试小程序呢 ?



> 📌 **注意事项：**
>
> 微信开发者工具缓存非常严重❗❗❗❗
>
> 如果发现代码和预期不一样，先点击编译❗
>
> 编译后还是没有达到预期的效果，就需要清除缓存❗ 甚至重启项目才可以❗



<img src="http://8.131.91.46:6677/mina/base/调试面板.png" style="zoom:70%;" />



<img src="http://8.131.91.46:6677/mina/base/工具栏.png" style="zoom:61%;" />





### 11. 如何新建页面



**第一种方式：**



1. 在 pages 目录上 点击右键 `新建文件夹`，输入页面目录的名称，例如：list

2. 在 list  目录上 点击右键 `点击 page`，输入页面文件的名称，例如：list

   

>  📌 **注意事项：**
>
>  1. 在输入页面文件名称的时候，不要输入后缀名 ❗
>  2. 新建页面成功以后，会在 app.json 的 pages 选项中新增页面路径



**第二种方式：**



在 app.json 的 pages 选项中，新增页面路径即可

在新增页面目录以后，会自动在 pages 目录下生成页面文件









### 12. 调试基础库



小程序调试基础库是指 微信开发者工具中可以选择的微信基础库版本。

微信基础库是指小程序的运行环境，给小程序提供了运行所需的各种 API 和工具，以及基础框架和运行逻辑等。



小程序开发者可以在微信开发者工具中选择所需的微信基础库版本，作为运行和调试小程序时的运行环境。

每个小程序有自己所允许使用的基础库最低版本要求，开发者需要选择要兼容的基础库版本，从而确保小程序的功能正常运行。

<img src="http://8.131.91.46:6677/mina/base/调试基础库.png" style="zoom:80%;" />






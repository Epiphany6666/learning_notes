# 1.0 认识计算机网络

《计算机网络》学什么？ —— 数据如何通过网络正确、可靠的从A传送到B



----

# 1.1_1计算机网络的概念及功能

## 一、网络的概念

网络：网样的东西或网状系统。

- 人体内的神经网络，这个网络就是由很多的神经元来组成的网状的系统
- 电信网络：打电话时通过电话线通过电路，连接起来的网状系统
- 有线电视网络：通过电缆 / 光缆将录制好的节目发给千家万户，也构成了一个非常庞大的网络系统
- 计算机网络：通过各个节点，这些节点包括终端的电脑、手机、集线器、中继器、交换机、路由器等中间设备通过有线或者无线的方式将所有刚刚说的连接起来，就构成了计算机网络。

其中 `有线电视网络`、`电信网络`、`计算机网络`，它们三个就是我们常说的三网，这三网在现在计算机社会有一个非常潮的名字：三网融合。就是通过计算机网络这个非常关键的媒介来实现的。

现在所处的社会是一个高度信息化以及高度数字化的社会，这个数字技术就广泛运用于计算机网络中，我们可以把所有的媒体、文字、图片、视频等等全部转换成0或1这样的数字比特流的形式，再放到链路上面进行传输，这样就可以实现不同的节点之间的通信，以及资源的共享，我们就可以将电信网络当中的音频信号编码为数字信号，同时也可以将有线电视网络中的图像、音频等全部编码成数字信号，再放到链路上进行传输。

所以通过计算机网络就可以把有线电视网络和电信网络融合在一起，可以达到的效果就是：我们可以在电脑上看电视，或者在电脑上打电话。

除此之外，最近还新建了一个四网融合的概念，第四网指的就是电网。例如路灯控制，随着城市规模不断扩大，这个路灯的管理和维护就成了非常重要的问题，那么电信的运营商就可以结合电信网络、计算机网络、有线电视网络来实现无线路灯的监控方案，这样就可以实现一个终端自动报警的功能。

![image-20240603101233571](./assets/image-20240603101233571.png)

----

## 二、计算机网络的定义

关于计算机网路的定义并没有一个统一的标准，不同的教材有不同的说法，下面是王道书对于计算机网络的定义：

计算机网络：是一个将分散的、具有独立功能的**计算机系统**，通过**通信设备**与**线路**连接起来，由功能完善的网络**软件**实现**资源共享**和**信息传递**的系统。

- 计算机系统：包括各种系统的手机端以及电脑端

- 通过的通信设备包括路由器、集线器、中继器、交换机等

- 线路：这里的线路可以说是逻辑线路，因为有的地方可以是无限的

  例如手机可以连WiFi，连到我所在的这个局域网的网关中，这也是实现了一个逻辑上的连接，也是线路的连接，再由功能完善的软件来实现资源共享和信息传递。

![image-20240603103834628](./assets/image-20240603103834628.png)

目前为止我们有了系统、通信设备、线路，但是只是一个空的架子，我们什么都不能干。因此目前的这个结构还需要有软件的支撑，才能够实现每个终端和终端之间的资源共享、以及信息的传递。

简单来说计算机网络就是一个**互连**的、**自治**的计算机集合。

- 互连：通过通信链路实现互连互通
- 自治：这些终端以及各个节点之间是没有主从关系的，是高度自治的

这个概念中其实也暴露出了计算机网络两个重要的功能：**资源共享**和**信息传递**

---

## 三、计算机网络的功能

### 1）数据通信

例如下面两台电脑，我可以将我的文件发给你，或者是给你发邮件，以及我们之间的项目发消息等等，这都是数据通信的功能。

<img src="./assets/image-20240603105040592.png" alt="image-20240603105040592" style="zoom:67%;" />

---

### 2）资源共享

资源共享：同一个计算机网络上的其它计算机可使用某台计算机的计算机资源的行为，可共享**硬件**、**软件**、**数据资源**。

- 共享硬件：其中硬件资源最常用的就是网络式打印机，只要我们的主机和打印机都连在同样一个网络内，同样给这个打印机配置一个固定的静态ip地址，这样我们的手机就可以通过网络和打印机连在一起，实现所有人对于这台打印机的共享。至于这个打印机如何处理每个人发来的这样一个文件的请求，就是操作系统将要学习的一些内容了。
- 共享软件：例如我在这个电脑上面远程访问了我的另一台电脑，然后使用我另一台电脑上面的一些软件(办公软件、画图软件等等)，这些都是实现了软件资源共享。
- 数据资源共享：就是我们最常用的了，例如我们在百度文库上面上传或者下载文件，这都是数据资源的共享。

当然这个网络资源的共享不一定都是免费的，它还会有收费的情况。以上两个功能非常的重要，接下来还有一些其它功能。

----

### 3）分布式处理

当一台计算机它所承受的符合过大的时候，所以它只能把它自己的任务分给其他计算机，即**多台计算机各自承担同一工作任务的不同部分。**

这样工作效率会高，同时也不会导致某一台的计算机负荷过大。一个典型的应用就是Hadoop这样的一个分布式平台，它可以进行告诉的运算以及分布式的存储。

----

### 4）提高可靠性

这个功能是分布式处理引申出的一个功能，可以提高网络的可靠性，由于使用了分布式处理，网络中的一台主机如果宕机了，此时我们就可以有另一台机器叫做 `替代机` 来接班。

----

### 5）负载均衡

其实也是分布式处理引申出来的一个功能特点，因为使用了分布式处理，所以可以使多台计算机各自承担一部分的工作任务，这样也**可以使计算机之间更加的亲密**，工作效率也会更高，更加合理的安排和分配资源。



----

# 计算机网络的发展

## 一、第一阶段

我们要回溯到美苏冷战时期这个时期，美国国防部他们是有一个单一的、非常集中的指挥点，但是他们就想，如果这个中心真的被苏联大哥一个核武器摧毁了，那么全国的军事系统将全部瘫痪，因为所有的节点全部依附在这样一个指挥中心上面。

所以他们就想：可不可以设计一个比较分散的指挥系统呢？这个指挥系统就可以由一个个的分散的指挥点组成，当一个指挥点被炸掉后，还会有另外几个指挥点接替他的工作，而且还可以实现彼此之间的通信，这个非常厉害的组织就是 `美国国防部高级研究计划局（ARPA）`，它就研究出来了这样一个网络 `阿帕网`，即 `ARPAnet`，即组织名 + 网络。

阿帕网的原形就是由四个分布在不同地区的节点组成，它们通过 `无线分组交换网 & 以及卫星通信网连接`，可以看见再这样一个连接过程中，如果其中一个节点被炸掉了，那么另外三个节点还是可以继续工作，以及继续通信的。

所以这个阿帕网的发展的每一个节点后面都会接入很多其它的一些终端、电脑，从而扩大了阿帕网这样一个规模。

但是有一个弊端就是：阿帕网它只可以连接同一类型的网络，随着信息量的增长，他们希望可以实现不同网络的互联，即  **internet(interconnected network)互联网**，奔着这个目标去努力就出现了一个协议：TCP/IP，通过这个协议可以实现不同网络的连接，其中这个IP协议是基本的一个通信协议，TCP是帮助IP实现可靠传输的协议，因此记住这两个协议他们联合起来就可以实现网络的互联。

阿帕网在1983年的时候正式的接受了这样一个协议，并且用它取代之前使用的一个旧协议，同时选定 `internet` 为主要的计算机通信系统。

最后得到的就是我们现在常说的因特网**（`Internet`）**。

这里要注意有大小写的区别，小写的 `因特网` 指的就是相互连接的这样一个网络的网络，它的是一个通用的名词；但是 `Internet` 中大写的 `I` 代表的是专有名词因特网，目前来说 `因特网` 就是我们现在全球范围内最大的 `互联网` ，所以 `阿帕网` 就是 `因特网` 的前身。

![image-20240603135505933](./assets/image-20240603135505933.png)

----

结合刚刚第一阶段来看，我们对网络应该有了一个更深层次的认识了。

网络其实本质上就是由若干个节点和连接这些节点的链路组成，构成的这样一朵云彩就叫做一个网络。

<img src="./assets/image-20240603171541960.png" alt="image-20240603171541960" style="zoom:67%;" />

将网络和网络通过路由器连接起来，就构成了一个大型的网络，也就是互联网。

网络把许多计算机连接在一起，而互联网则把许多网络连接在一起，因特网是实际上最大的互联网。

<img src="./assets/image-20240603173948671.png" alt="image-20240603173948671" style="zoom:30%;" />

----

## 二、第二阶段

第二阶段是从1985年起，美国国家科学基金会NSF围绕6个大型计算机中心建设计算机网络，即国家科学基金网NSFNET。

这种网络是三层结构，最底层就是校园网或者是企业网，第三层次的用户如果想要连到网上，就需要再连接到第二层的地区网，并且第二层的地区网再连接到第一层的主干网，因此就形成了这样逻辑比较清晰的三层网络结构。

这种三级的网络结构其实就覆盖了当时美国大部分的学校以及研究所，并且成为了因特网当中的主要组成部分。

<img src="./assets/image-20240603174053615.png" alt="image-20240603174053615" style="zoom:30%;" />

但是随着技术的发展，越来越多的用户、公司都可以连到这个互联网当中，所以就会导致这个网络的信息量急剧的增大，而美国当时他掌控的这个因特网其实是已经满足不了大量的需求了，所以美国政府就觉得把这个因特网的主干网交给一些私人公司来经营，并且开始对接入因特网的单位来进行收费，那么也就到了我们接下来的第三阶段。

---

## 三、第三阶段  ——  多层次的ISP结构

刚刚说过美国在第二阶段把这个控制权逐步的移交给了很多公司，这些公司在第三阶段就称之为ISP。

**ISP**：因特网服务提供者 / 因特网服务提供商，是一个向广大用户综合提供互联网接入业务、信息业务、和增值业务的公司，如中国电信、中国联通、中国移动等。分为主干ISP、地区ISP和本地ISP。

其实它也是沿用了第二阶段的三层结构，只不过是把网络的管理权利分散，由它们来进行网络的分配以及服务的提供等等。

那我们无论在校园还是在家里，我们都会交网费，这个网费其实就是给ISP的服务费，我们通过给ISP支付服务费的这种方式，才能够使用ISP的服务，以升到一个IP地址来畅游网络。

<img src="./assets/image-20240603175405243.png" alt="image-20240603175405243" style="zoom:30%;" />

具体来讲就是：全世界有一个这么大的IP池，叫做因特网管理机构来管理的，如果ISP供应商要给用户提供服务给它们分配IP，它就首先要从IP池要到一个网段的IP地址，然后再分配给用户，这样每个用户就会有一个IP地址，就能够正常的上网了。

有的人会说：我想花重金买个靓号可以吗？这跟手机号是不一样的，IP地址是ISP给你分配好的，感兴趣的同学可以在百度收一下本地IP，然后就可以看到你自己现在在的这个位置，例如下面搜 `110.110.110.110`，这个IP地址是在 `黑龙江省哈尔滨市` ，`铁通` 指的就是这个IP地址所在的公司。刚刚说了，ISP会给这一个区域范围内的用户分配IP地址，假设我现在所在的小区是由四川电信分配的IP地址，所以我们就可以享受到四川电信给我们提供的一些互联网的业务和服务。那我能不能享受享受到北京电信的服务呢？当然也可以，只不过那个路程非常遥远，它不是直接管理的ISP，所以我们就会在下载一些游戏或者电影的时候就会看到有很多选项，什么四川电信、四川移动、北京电信等等，这些其实就是根据ISP来选择的。那如果你在四川，你家是电信网，那你自然就连四川电信，那如果你选择别的运营商下载，可能会有速度比较慢的情况，只要每一个本地ISP都安装路由器连接到了地区ISP，而地区ISP也有路由器连接到了主干ISP，就可以完成因特网中所有的数据分组转发的任务，也就可以让我们畅游网络，访问各个网站的资源。

但是随着这个流量的激增，人们对于网络的要求也越来越高，就开始研究怎么更快的转发数据、转发分组。因此就诞生了这样一个概念：因特网交换点IXP。原本的A和B如果要通信的话，就需要经过一层又一层的ISP结构，通过本地ISP到地区ISP再到主干ISP，然后再一路下去；但有了因特网交换点，我们就可以允许这两个网络直接相连，而不再需要第三个网络来转换分组了。

IXP的出现也大大提高了信息传递和资源共享的速度。

![image-20240603180425108](./assets/image-20240603180425108.png)

----

## 四、总结

<img src="./assets/image-20240603180514799.png" alt="image-20240603180514799" style="zoom:33%;" />



---

# 1.1_2 组成与分类

# 计算机网络的组成

从不同的角度入手，我们可以先从计算机网络的一个基本架子的组成来看一下。

## 一、从组成部分上

它是由**硬件**、**软件**、**协议(一系列规则和约定的结合)** 这三大组要要素在一起构成了计算机网络。

- 硬件：这个端系统以及中间的这些路由器、交换机等等的中间设备
- 软件：就是附在端系统上，甚至是包括这个中间设备上面也有一定的软件，将这些软件步到这些硬件上
- 再通过协议穿梭于各个硬件中，就构成了一个计算机网络

<img src="./assets/image-20240603181936437.png" alt="image-20240603181936437" style="zoom:57%;" />

计算机网络每一个层次它其实是有很多协议的，根据这些协议，我们就可以规定这个数据如何封装、如何打包、如何传输、如何从这一端到你的另一端，这些都是协议要包含要学习的内容。

----

## 二、从工作方式上

从工作方式上我们可以将计算机网络分为

- 边缘部分
- 核心部分

### 1）边缘部分

虽然它称之为边缘部分，但是它也非常的重要。把一部分就是由一系列的端系统组成的，这些端系统不仅包括一些计算机，也可以包括非常庞大的一些服务器，和大型计算机，甚至还可以包括是非常小的计算机网络摄像头，它可以实时的捕获到一些信息，并且把这些信息实时的发布出去，这些都是边缘部分。

但计算机网络只有边缘部分还不够，它需要使用核心部分的一些服务，也就是通过核心部分提供服务，边缘部分才能实现端系统与端系统之间的这样一个通信。

端系统之间的通信强调的是进程之间的通信，也就是我们主机A和主机B在通信，其实讲的是主机A当中的某个进程和主机B当中的某个进程之间的通信。例如我们在打开QQ的时候，登录后，我在界面上输入要发出的文件，此时QQ就是我电脑中正在运行的一个程序，而B这边也有人打开了QQ，在这边接收我的消息，或者他给别人发信息，那它使用的QQ也是一个正在运行的程序，也是一个进程。

<img src="./assets/image-20240603215759520.png" alt="image-20240603215759520" style="zoom:50%;" />

所以在这里再强调一下，就是端和端之间的通信其实只的是两个端系统之间的进程通信，那么这两个端系统之间的进程通信包括两种方式：

- `C/S方式`：Client and Server,即客户/服务器的方式，这种方式是因特网上最常用的，也是最传统的一种方式，它描述的是这两个端系统之间的进程，呈现着一种服务与被服务的关系，client客户就是被服务的，server就是为客户提供服务的。

例如我们在使用微信的时候，在给别人发消息的时候，就需要把消息发给腾讯的服务器，然后由这个服务器处理我们的这个请求，再把消息传递给另一个人。但此时此刻不止我一个人在发微信，有可能正在看我笔记的你也在发微信，有很多很多人都在发微信，就会像这个服务器发出很多请求，这个服务器就需要一次处理这些请求，并且执行这个请求当中的一些任务。

所以发出请求的我们，即客户，承接我们请求的这个服务器就是这个CS方式中的server。

但由于资源是有限的，当访问的人越多的时候，我们就可以知道这个速度是越慢的。

举个例子：在我们微信、支付宝等平台上抢红包的时候，大家经常会出现卡顿，正是因为这个服务器要接收很多很多请求，所以由于它的资源有限，就会导致访问这个服务器的请求越多，那么得到这个响应的速度就越慢。

除了 `C/S` 外，还有一个叫做 `B/S方式`。`C/S方式` 通常指的是你要下载一些客户端的软件，包括QQ、微信客户端等。而`B/S` 中的 `B` 指的就是 `Browser`，即浏览器的意思。`B/S方式` 和 `C/S方式` 其实都很类似，只不过把我们这个客户端换成浏览器了而已。

----

- `P2P方式`(peer-to-peer，即对等的连接)：这个情况下大家都是对等的，没有一台主机说我一定是服务器，也没有一台主机说我永远是一个客户机，在这种方式下所有的主机都有两个身份：一面试提供服务的服务者，另一面就是使用服务的享受者，即客户，所以这里面的每一个端系统它同时又是客户，又是服务器。

简单来说：假设A它现在手里有一个500M的大片，然后现在有B、C、D三个人都想下这个片子。`P2P下载` 其实就是将一个大的文件切分成几个大小不等或者大小相等的数据块，假设B先拿到一部分数据，例如它下了250M的片子，下了这250M之后，马上就给C传了200M，同时B还会继续从A下载电影，那么C收到200M之后，它很功德无量，继续把这个东西分享给小D，假设分到了150M，这个小D同时又可以向A发出请求：你再分我一点，此时C和A其实都可以一起资助D，那么A又给D传了一部分视频，所以D在很快的时间内就可以下完这个片子了。当然D其实也可以向B请求服务，B同时也可以把自己片子中已经下好的一部分再继续上传给D，这样看D又收到了B的恩惠，所以可以看到在 `P2P` 下载的这种情况下，其实是一个我为人人人人为我的情况。

例如B跟C这两个既是服务器，同时又是客户，因为它们两个即承担了上传的功能，同时它们也享受到了下载服务。

我们再来看这个小D，小D它同时有A、B、C3个人一起给他传文件，可想而知这个D获得这个文件的速度应该非常快，所以在 `P2P下载` 的环境中，当这个主机越多越好，我们下载的速度就越快，刚好和 `C/S` 是相反的，`C/S` 由于只有固定的几个机器做服务器，所以请求他们这个服务的人越多，就会导致这个服务器的相应越慢；但是 `P2P` 却相反，因为每一个人，即每一个端系统既可以是客户，同时也可以是服务器。

<img src="./assets/image-20240603215227060.png" alt="image-20240603215227060" style="zoom:67%;" />

----

### 2）核心部分

核心部分其实就是被边缘部分服务的，包括路由器、一些中间设备，还有一些网络连接起来，那么核心部分和边缘部分连接在一起就构成了计算机网络，这也是在工作方式上面对于计算机网络组成的一个划分。

<img src="./assets/image-20240603215941481.png" alt="image-20240603215941481" style="zoom:67%;" />

----

## 三、从功能组成方面

这也是非常重要的一点，在上节课我们学过计算机网络主要有两个功能呢，分别是数据通信以及资源共享。

根据这两个功能我们就可以将计算机网络分成 `通信子网` 和 `资源子网`。

- 通信子网：实现数据通信
- 资源子网：实现资源共享 / 数据处理

计算机网络我们可以给它按照层次来划分，在OSI参考模型中它是被划分成了七层。

在这七层中，下三层代表的就是通信子网，因为它们是由各种传输介质、通信设备、相应的网络协议所组成，它可以让这个网络具有传输交换、控制和存储的能力，同时还可以实现联网计算机之间的数据通信。

那在这三个层次当中，实现数据通信的主要设备就是包括网络层的路由器、链路层的交换机、网桥、网络层的集线器和中继器等等。

下面三层实现的是通信子网，相当于把这个公路铺好。

那么上面三层其实就是资源子网，实现资源共享功能的设备和软件的集合，资源子网就可以向网络用户提供共享其它计算机上的硬件资源、软件资源和数据资源等等的服务。

那其实可以理解为上三层就是对数据进行一个封装和处理，下三层就是把这个数据送上路；那中间这个传输层起到一个非常重要的融会贯通的作用，这个传输层主要是为了弥补上面三层要求的服务和网络层提供的服务之间的差距，并且向高层用户屏蔽这个通信子网中的一些细节，所以这个层次也是非常重要的。

<img src="./assets/image-20240604081055788.png" alt="image-20240604081055788" style="zoom:50%;" />

----

# 计算机网络的分类

## 一、按分步范围分

计算机网络按照分布范围分，可以分为 `广域网WAN`、`城域网MAN`、`局域网LAN`、`个人区域网PAN`

- `广域网WAN` 范围非常广，几十到几千公里，它属于因特网的核心部分，它的任务就是通过比较长的距离，可以是跨国家的距离，然后来运送主机之间所要发送的一些数据。
- `城域网MAN` 作用范围顾名思义，就是可以覆盖一个城市的这样一个网络。
- `局域网LAN` 也是我们要学习的非常重要的一种网络类型，局域网在地理上是比较小的一个范围，例如一个学校或者一个办公楼。

`个人区域网PAN`，即个人工作的地方把自己的一些电子设备，例如电脑、智能手表通过无线技术连接起来的网络，也称之为：`无线个人区域网PAN`，范围很小，通常就在10m左右。

我们主要学习的就是广域网和局域网，这两个网络通常使用广播技术。

<img src="./assets/image-20240604083852187.png" alt="image-20240604083852187" style="zoom:67%;" />

局域网和广域网的区别不仅仅是他们在地理范围上的差别，而且更重要的是我们不能仅看它那个地理范围多大多小就判断它是广域网还是局域网，我们更重要的是看它使用的是什么技术，如果使用的是广域网的技术，那它其实就是广域网；如果使用的是局域网的技术，那它就应该被定义为是局域网。

例如我就住在你家对面，但我们两个之间的通信是通过拨号上网，你也是通过拨号上网，然后我们的数据在这个网络中进行交换和传递，这个网络是互联网，所以我们目前虽然离的近，但是我们实际上使用的是广域网的技术，因此这个地方还有个称之为是广域网。

这个图就体现了这样一个道理：世界上最远的距离不是我住在你隔壁，是我们之间的数据通信需要经过一个广域网的距离。

<img src="./assets/image-20240604084118264.png" alt="image-20240604084118264" style="zoom:50%;" />

分清了这两个的区别后，我们还需要补充的一点就是：这两个网络通常使用的技术，局域网通常使用的是 `广播技术`、广域网通常使用的是交换技术。

局域网通常范围是比较小的，那么在一个比较小的范围内，我喊一声大家都听得见。例如在一个村子里，村长打开广播说几句话，全村的人都能听见，这个就是局域网使用的广播技术。

但是对于广域网来说，你在小区喊，对面的人甚至都已经听不到你的声音了，所以广域网靠广播是不合适的，因此它使用的就是交换技术就是通过路由器等等一些中间设备，把我们这个数据一点一点地转发存储，并且交换出去。

----

## 二、按照使用者分

可以分为公共网和专用网。

- 公用网：国有 / 私有出资建造的一些大型网络，包括电信、联通、移动等
- 专用网：某个部门 / 行业 为了自己的一些特殊的工作需要所以构建的网络，例如军队、政府、很多互联网公司的办公室，使用的都是专用网、内网

----

## 三、按交换技术分

按交换技术分可以分为 `电路交换`、`报文交换`、`分组交换`。

这几种交换技术其实就是在说我们这个数据是怎么交换的。

- **电路交换**：因为我们打的电话使用的就是电路交换方式。我们可以想象打电话的流程，首先你要拿起电话，然后拨号，拨号之后如果打通了，那你其实就在和另一个人之间建立好了一个连接，而且你们这两个连接不会轻易的被别人插入，当别人在给你打电话的时候，就会发现你其实是在跟别人打电话的，那么这个时候就会听到：对不起，您拨打的电话正在通话中，请稍后再拨。这就是因为我已经在和另一个人打电话占线了，即占了这条线了。

  所以电路交换的原理就是首先建立连接，即占用这样一个通信资源，第二个就是通话，通话就是一直占用这个资源，第三个就是释放连接，我们打完电话，把电话一放下，也就是释放连接，归还了通信资源，那么有这三个步骤的一种交换方式就称之为是电路交换。

  所以电路交换的特点就是：在通话的全部时间内，通话的两个人是完全占着中间的资源不能被别人所使用的。

- **报文交换和分组交换**在这一点上面就显得格外的友好一点了，它们两个不会说一直占着这条线路，它们两个使用的技术的特点叫做 `存储转发`，它们的区别主要是它们的主体不一样，这个数据可以是报文或者是分组的形式，其实简单来讲，这个分组其实就是将报文切开了，切成一小个一小个的。一整个完整的文件，例如一个媒体文件，都称之为是一个报文。

  存储转发指的就是我们要发的这个数据，无论是报文还是分组，首先我们要放到网络上面传输，可能我先给了一个路由器，这个路由器R1，这个路由器R1就会存下来我的这个报文或者分组来检查一下它要往哪发，例如现在有两条路可以经过R2和R3，它会发现如果走R2，接下来的路会走的更快一点，那么它就会把这个数据转发给R2。

  所以存储转发中的存储是指这个路由器对于收过来的这个数据，先存储，然后查看一下这个数据的一些目的地址、还有很多一些其他相关的信息，接下来再转发出去，转发给正确的一个路由方向，这个就是报文交换和分组交换的一个特点。

  可以看到这个特点它只是一段一段的占用这个链路，并不是像电路交换一样独享占用的资源；同时如果有别的数据在这样一条链路上面发送也是可以的，再次反映出来这种存储转发的交换方式还是非常和平友好的

----

## 四、按拓扑结构分

按拓扑结构分我们可以分为很多种类型，这里面只简单的举这几种总线型、星型、环形、网状型。

![image-20240604093228059](./assets/image-20240604093228059.png)

拓扑结构其实就是把网络中的节点，这个节点可以是路由器、交换机这些中间设备，也可以是端系统中的主机，把这些节点变成这一个个的小圆圈，然后把通信链路抽象成一条线，将圆圈和线组合在一起的结构就称之为拓扑结构，是一个非常清晰的几何结构。

那么我们常见的几种计算机网络的拓扑结构就包括

- 总线型：所有的端系统 / 节点都连接在这个总线上面
- 星型：由工件这个节点四散开来链接每一个节点，关于星型这块通常会考察节点的个数和中间这个链路数的一个关系，这里面如果有两个节点，那么它需要的是五条链路
- 环形：将他这些节点全部连在一起连成环
- 网状型：就是我们现在**广域网**中常用的一个拓扑结构

----

## 五、按传输技术分

- 广播式网路：其实就是应用在局域网中的一种网络，它是共享公共通信信道的，通常使用的是总线型拓扑结构，共享中间这条公共的信道，所有联网的计算机都可以享用这个信道，并且**当一台计算机向这个共享信道发送报文分组的时候，其他的所有计算机都会听到 / 收到这个分组。**

- 点对点网络：使用**分组存储转发**和**路由选择机制**

  这种网络通常就是对应这个广域网，这个广域网基本都是属于点对点的网络，它指的是在这个网络中，如果两台主机之间需要通信，但是没有直接连接的话，它就需要很多中间节点来实现分组的存储转发和路由的选择。

  也就是我们刚刚在讲报文交换和分组交换这一块存储转发的机制。

  在点对点网络中，它和广播式网络不同的就是：我要发的这个信息并不是所有人都能听得到，只有你才能听得到，并且这个信息如果传到你那，就需要通过分组存储转发以及路由选择机制。

---

# 思维导图总结

![image-20240604094800068](./assets/image-20240604094800068.png)



----

# 1.1.3 标准化工作

我们说国有国法，家有家法，那在计算机网络这门领域也要有一定的标准。

标准化对计算机网络是非常重要的。不知道同学们有没有遇见过这种情况：发现你下载的游戏玩不了了，就是和你的操作系统不兼容，这种情况就说明我们这个游戏在标准化工作的设计上面出现了一些问题。

<img src="./assets/image-20240604100855405.png" alt="image-20240604100855405" style="zoom:50%;" />

所以说如果要实现一些不同厂商的硬件和软件之间的相互联通，必须要遵从统一的标准。

## 一、标准的分类

- 法定标准：由权威机构制定的正式的、合法的标准。这个法定标准可以是国内的法定标准，也可以是国际上的法定标准，比较常见的就有OSI的标准。

- 事实标准：由于某些公司的产品在竞争中占据了主流，时间一长，这些产品中的一些协议或者技术就成为了事实上的标准。

  比较常见的就是 `TCP/IP协议`。

例如手机卡的例子，市面上常见的有这三种手机卡，随着时代和技术的发展，我们手机卡也变得越来越小，这样可以使我们的机身更加的轻薄。右边的第一个就是大卡，既以前常用的，第二个就是 `Micro SIM卡`，最后就是最新的 `Nano SIM卡`，即苹果在IPhone5开始使用的这样一个小卡微型卡，苹果一采用后，其他的厂家纷纷就跟着苹果来学了，目前来看 `Nano SIM卡` 就称为了目前事实上的标准。

<img src="./assets/image-20240604110157843.png" alt="image-20240604110157843" style="zoom:50%;" />

---

## 二、标准化工作建立标准的流程

讲到这里有很多同学觉得这个标准化工作特别的厉害，是不是有些高大上，那我自己可以指定一个标准吗？答案是可以的，如果你感想，你就可以制定出一个这样的草案出来，等到上面的组织来审核，如果审核成功，那你这个标准就成为了一个非常棒的因特网标准。

这里面一定要提的一个重量级的嘉宾：RFC(request for comments)，字面意思就是请求评论。它是因特网标准的一种形式，也就是说只要你这个是一个因特网标准，它就一定是RFC形式，但是不代表所有的RFC都是因特网标准。

我们要知道，RFC如果要上升因特网标准，要经过哪四个阶段

**1）因特网草案（Internet Draft）**：这个阶段还不是RFC文档，只能说是你的一个构思，假如你现在想要指定一个标准，你就可以先拟一个因特网草案出来，然后以邮件的方式发给这个邮箱

<img src="./assets/image-20240604111221438.png" alt="image-20240604111221438" style="zoom:50%;" />

等你发完之后，RFC编辑就会给你一个回复，如果你的这个草案他们觉得很不错，那你就进入了下一个阶段，当然如果不行，它也会回复你：欢迎你下次再来。

----

**2）建议标准（Proposed Sstandard）**：从这个阶段开始成为RFC文档，即草案成为了建议的标准。

----

**3）草案标准（Draft Standard）**

当你的草案成为了建议的标准，即成为了一个RFC文档后，它就可以开始请求评论了，也就是说你可以把你这个RFC文档放到因特网上面，然后等很多人过来给你进行一些修改、意见，将你的这个RFC文档进一步的进行一个完善，当完善后就形成了一个草案标准。

这个时候就是要到最终环节了，把它拿到IETF、IAB这两个组织上面给他们去审核，如果最后一关你也通过了，那你这个因特网草案就真正的成为了一个因特网的标准。

当然我们现在的这个从2011年开始后，第三个阶段就已经取消了。

<img src="./assets/image-20240604113041708.png" alt="image-20240604113041708" style="zoom:47%;" />

---

## 三、标准化工作的相关组织

在相关组织中，打头阵的就是这个 `国际化标准化组织ISO`，它的主要贡献是：OSI参考模型以及HDLC协议。

其次就是 `国际电信联盟ITU`，它的主要贡献是指定了通信规则，也就是它是负责电信电话这一方面的。

第三个就是 `国际电气电子工程师协会IEEE`，它是一个学术机构，这个大家在研究生的时候会经常接触到，例如你要去找一些优质的论文，就可以在IEEE上面找，它是一个非常强大的平台，上面有黑车非常广的学术论文的资源。 `IEEE802系列标准` 也是 `IEEE` 来建立的、`5G` 相关的协议也是 `IEEE` 来规定的。

最后一个就是 `Internet工程任务组IETF`，刚刚讲过，`IETF`、`IAB` 这两个组织是负责因特网相关标准的指定，也就是说你这个RFC文档最后能不能成为一个因特网标准，就看这两个组织能不能同意了，如果同意了，你就可以成为一个因特网标准，而且会有这样一个形式 `RFC XXXX`，后面是数字编号。当然如果你这个RFC文档迭代更新后，你的这个编号就会继续往上增加。

其中最重要的是 `国际化标准化组织ISO`。

<img src="./assets/image-20240604113847440.png" alt="image-20240604113847440" style="zoom:47%;" />

----

## 四、总结

<img src="./assets/image-20240604113909610.png" alt="image-20240604113909610" style="zoom:50%;" />



----

# 1.1-4 性能指标：速率、宽带、吞吐量

这节我们学习三个性能指标，下节我们学习四个性能指标。

<img src="./assets/image-20240604140324437.png" alt="image-20240604140324437" style="zoom:50%;" />

那为什么要将这三个放在一起呢？因为这三个它们其实是密切相关的，这三兄弟有一个核心就是 `吞吐量`，这个 `吞吐量` 是严格受到个宽带和速率的影响，接下来看一下这三者的定义以及它们之间的关系。

---

## 一、速率

### 1）概念

速率指的就是快慢，我们在计算机网络中的速率指**数据率**，或者说是**数据传输率**，也叫作**比特率**。

前导知识：比特。

我们知道在计算机中，计算机发出的信号它都是以数字形式发送的，比特就是计算机当中数据量的一个单位。

就好像我们进游乐园排队的时候，我们是一个人一个人的进游乐园，在这个数据传输的过程中，也是一个比特一个比特的进入信道，我们数据传输的单位就是一个比特，它的表现形式无非就两种：`数字1` 或者 `数字0`，它的单位就是 `位`。

例如 `1` 可以说是 `1位比特`，`0` 也可以叫做是 `一位比特`。

**速率**它指的就是**连接在计算机网络上的主机在数字信道上传送数据位数的速率**。

单位是 `b/s`、`kb/s`、`Mb/s`、`Gb/s`、`Tb/s`。

----

接下来用一个小例子理解一下什么是速率。

假如发送端、接收端，这两个端分别是两个主机a和b，那a要给b发送数据，假如说它准备了十位的数据，也就是十位的比特位，刚好是是个数字，它要把这十位数据发送给接收端，在一秒内它刚好把这十位数据发送完毕，也就是将这十位数据传到了信道上面，这个就说明它的速率就是 `10b/s`。

---

### 2）单位换算

速率的两个单位都相差 `10的三次方`

<img src="./assets/image-20240604144601899.png" alt="image-20240604144601899" style="zoom:67%;" />

但容量就不一样，相差 `2的十次方`，即 `1024`。

小写的 `b` 换成了大写的 `B`， 即 `Byte` 字节；`k` 换成了大写的 `K`。

这个是我们通常的写法，存储容量的时候我们通常都会采用KB。

<img src="./assets/image-20240604144943794.png" alt="image-20240604144943794" style="zoom:60%;" />

接下来要讲一个经常与速率混着考的一个概念：带宽，它也是计算机网络中的一种性能指标。

----

## 二、带宽

`速率` 其实都比较偏向是一个实际上的速率，即实际上我们可以传输的速率。但是 `带宽` 主要指的是理想条件下能够达到的最高的发送速率。

（1）`带宽` 原本指某个信号具有的频带宽度，即最高频率与最低频率之差，单位是赫兹（Hz）。

在过去很长时间内，通信的主干路线传送的都是模拟信号，而不是像现在0101这样的数字信号。所以说表示通信线路允许通过信号的频带范围就叫做线路的带宽。

（2）计算机网络中，带宽用来表示网络的通信线路传送数据的能力，通常是指单位时间内从网络中的某一点到另一点所能通过的 “最高数据率”。单位是 “比特每秒”，`b/s`、`kb/s`，`Mb/s`、`Gb/s`，并且刚刚讲过速率间的换算是 `10的三次方`。

这里面的 `带宽` 其实还可以这样理解：它是网络设备所能支持的最高速度。

例如我买了一台交换机，这台交换机的口是100M的口，也就是说我这一个交换机最多、极限的传输速率就是100`Mb/s`，假设我的交换机这边再连一个百兆的网卡，那我们两个就可以实现相互通信，通信的过程中，我这一秒内交换机能往信道 / 链路上面传输的比特数就是 `100Mb/s`，这个就是网络设备所能支持的最高速度。这就是说这样设备的物理极限传输值。

<img src="./assets/image-20240604155712046.png" alt="image-20240604155712046" style="zoom:50%;" />

---

接下来我们再举一个例子带宽是什么。

首先我们放一个非常大的链路，链路也可以叫做信道，链路它通常的介质可以是双绞线、同轴电缆等等，这个在之后第二章的物理层会学到。

我们对于这个链路首先要有一个大概的了解，两个条件如图

光的传播速率为 `3 × 10的八次方m / s`，由于链路是固态的，经过这个链路传输后，它会有一定的能量损耗，因此就会导致这个电磁波现在的传播速率是 `2 × 10的八次方米每秒`，也就是电磁波 `1us` 内可以向前传播200m。这个电磁波就是以信号的一个展示形式，也就是说信号是以电磁波为载体在链路上进行传输。

我们知道这两个条件之后，我们首先把这个链路分个段，假如说我们这个链路目前只有600m，每200m分一段，因为我们刚刚说了这个电磁波 `1us` 可以向前传播200m。

<img src="./assets/image-20240604160107513.png" alt="image-20240604160107513" style="zoom:60%;" />

接下来开始，经过了第 `1us(1微妙)` 后，我们这一边的设备可以是交换机，也可以是主机，它可以往这个链路上刚好就可以发送 `1比特` 的数据，因为上图说了主机 `1us` 内可向链路发送 `1bit数据`，所以过了 `1us` 后，就有一个比特出现在链路上。

<img src="./assets/image-20240604164541960.png" alt="image-20240604164541960" style="zoom:50%;" />

再来看，再经过 `1us`，也就是 `t = 2us` 的时候，第一个 `比特` 在 `1us` 内往前移动了200m，那第二个比特从这个主机上面传送到链路上，这就是第二秒内发生的两个动作。

<img src="./assets/image-20240604165936143.png" alt="image-20240604165936143" style="zoom:67%;" />

我们再来看第三个微秒，在第三个微秒的时候，第一个比特它又往前移动了200m，也就是移到了过了400m这条线，第二个bit也移动了200m到了第二段，第三个比特出现了，从主机到注入到这个链路中来，花了1微秒，在这1微秒中他们干了三件事：三个比特都分别有自己的动作。

---

我们再来看另一种情况：如果链路带宽相爱变成了2兆比特每秒，那么对应的主机或者交换机等它在 `1us` 内可以向链路注入 / 发送 `2bit` 数据。

在这种情况下，在 `3us` 内往链路中注入的比特数有六个。

<img src="./assets/image-20240604171812468.png" alt="image-20240604171812468" style="zoom:67%;" />

讲到这大家可以发现，我们这个**链路的带宽指的就是在链路入口的位置最高能发送数据的速率，而不是指的是在链路上传播的速率**，因为在链路上我们都是以电磁波的形式来传播的。

可以发现如果带宽变大的话，只能说它 `1us` 内单位时间内往链路中注入的数据 / 数据量比特数变多了，而不会影响这个比特在这样一个链路上面传播的速度。

---

## 三、吞吐量

吞吐量这个词不仅在计算机网络中会学到，而且在操作系统的pv原理那部分，做例题的时候也会碰到，同时这个词在我们生活中也很常用，例如我们在这个假期去旅游的时候，这个景点就非常多的人进进出出，比如十分钟之内进出了多少人。

<img src="./assets/image-20240604173729232.png" alt="image-20240604173729232" style="zoom:50%;" />

----

吞吐量：表示在**单位时间**内通过**某个网络(或信道、接口)**的数量了。它们也是一个表示速度的单位 `b/s`、`kb/s`、`Mb/s` 等，和刚才的速率 / 带宽的单位都是一样的。

**吞吐量是受网络的带宽 / 网络的额定速率 / 标称速率的限制**（这几个都是同义词），指的都是我们这样一条信道，或者是这样一个网络设备每秒它能通过的最高的数据量，也就是最快的速度是多少。

这里我们举个例子：下图有一个主机、一台交换机、两个服务器，这两个服务器提供的功能就是我们在访问网页或者是在进行一些计算程序、视频渲染都可以用得到。

交换机这里不展开讲，我们可以暂时将它理解为：相当于是把这两个服务器拿来的数据捆成一捆，传送给我们自己的电脑，可以将它想象成一个桥梁，一个中介的形式。

主机、交换机、服务器中间需要通过链路（双绞线、同轴电缆、光线等等），通过他们把这些东西连在一起，然后基本就搭好了一个架子，就可以来实现计算机网络数据通信的一个功能

<img src="./assets/image-20240604175814384.png" alt="image-20240604175814384" style="zoom:50%;" />

首先主机和交换机的两个口它们都是百兆口。

百兆口就是说我们这台计算机往外发送速率最快是 `100Mb/s`，这个交换机同样往外发送的速率也是最高 `100Mb/s`，这两个口刚好就对上了，既然这两个都是 `100M/s`，那我们就可以说这条链路的带宽就是 `100Mb/s`。

当然我们刚刚说的带宽指的是发送的速率，也是传输速率，单是接受速率受的影响还是比较多的，而且接收速率主要是看你这个缓存的大小，这个是来限制你接受的速度有多快的。

然后主机就需要来访问两个网页，假设从服务器1访问的网页的速率是 `20Mb/s`，也就是说这个服务器最多1s中可以给你传 `20Mb(兆比特)`，第二个服务器一秒最多给你传 `10Mb`，这个速率其实是受服务器它们自身的发送速率的限制了，它们只能发送这么多，所以他们就给你发了20Mb/s，以及10Mb/s的数据。

根据这个我们可以看见，带宽其实是一种理想的状态，这个是不可能达到的，实际的传输速率都是要比带宽小的。

根据这个我们就可以算一下，我这台电脑的网卡，或者说在这个两路上面吞吐量是多少呢？

自然就是将这两个相加，1s中这样一条链路上我们总共能收到多少数据。

因此我们这个网卡，或者是线路中某个端口，1s中可以接收到30M比特，这个就是吞吐量，但我自己自身的能力其实是可以接收100M比特Mb/s。

链路贷款就是它这个标准的最高的数据率，这个速率指的通常都是实际上传输的数据率，吞吐量就是把所有链路都相加。

<img src="./assets/image-20240604182831310.png" alt="image-20240604182831310" style="zoom:50%;" />



----

# 1.1_5 性能指标：时延、时延带宽积、往返时延RTT、利用率

<img src="./assets/image-20240604191614858.png" alt="image-20240604191614858" style="zoom:50%;" />

----

## 一、时延

延时：指数据 (报文/分组/比特流) 从网络（或链路）的一端传送到另一端所需的时间。也叫作延迟或迟延。单位是s。

非常重要的描述时间的性能指标。

时延包括四大类，如果题目要求我们求总时延，自然要将这四种时延全都加在一起。

<img src="./assets/image-20240604192117345.png" alt="image-20240604192117345" style="zoom:50%;" />

接下来我们结合AB两个主机通信的例子，来理解一下这四种时延分别发生在哪一个位置。

AB两个主机之间通过电路，这个电路可以是光纤或者是同轴电缆进行连接，然后中间再安上这样一个路由器。

---

### 1）发送时延

**发送时延：从发送分组的第一个比特算起，到该分组的最后一个比特发送完毕所需的时间。**也叫传输时延。

假设A主机它有10位比特，它要把这些数据发送给b，首先它要经过的就是这个 `发送时延`，它把所有的这个数据从他自己身上推到信道上，直到最后一个比特也到了信道上为止，这样一端时间就叫做发送时延。

![image-20240604200854833](./assets/image-20240604200854833.png)

可以看到发送时延它是受两个因素影响的：1、我有多长的数据；2、我发送的快慢

所以发送时延的公式如下图，信道带宽就是发送速率了。

<img src="./assets/image-20240604201036755.png" alt="image-20240604201036755" style="zoom:67%;" />

上节我们讲过，带宽指的是单位时间内从网络中的某一点到另一点所能通过的 “最高数据率”，也就是我们这个主机可以发送的最高数据率。

但是我们在实际生活中传输速率是达不到我们的信道的带宽的，它只能说是一个理想的值，可是在做题的时候它基本给的都是带宽，所以我们做题的时候还是要用带宽来当做发送速率来求它的发送时延。

假如说主机这个口的带宽是 `10b/s`，也就是A主机一秒可以把10个比特完全推到这个信道上面来，那么这个发送时延就是 `10 / 10 = 1s`，即A把这10个比特推送到信道上面的时间是1秒。

---

### 2）传播时延

我们还是结合这10个比特来看它传播时延这段时间发生了什么。

这10个比特我们可以看到，从起始位置一直推到了碰到路由器为止，例如刚好如下图在路由器等候为止，这样一段时间就叫做传播时延。

<img src="./assets/image-20240604205736719.png" alt="image-20240604205736719" style="zoom:50%;" />

**传播时延是电磁波在信道上传播一定距离所花费的时间**，所以说它取决于**电磁波的传播速度**以及**电路的长度**。

电磁波的传播速度通常都是比较固定的数字，都是 `二点几 × 10的八次方 m/s`，因为我们知道电磁波在真空中传播的速度和光速基本是一样的，即 `3 × 10的八次方 m/s`，但是我们在这个固体介质上面进行传输会有一定的损耗，导致我们的速度要比 `3 × 10的八次方 m/s` 要小，基本上最后这个实际应用中都是 `2 × 10的八次方 m/s`。

传播时延的公式如下图

<img src="./assets/image-20240604203633874.png" alt="image-20240604203633874" style="zoom:50%;" />

这里可能有同学有疑问：为什么是电磁波在信道上传输的速度呢？不应该是比特流或者是信号的传输吗？

其实是这样的，我们的信号会经过一定的调制手法，把这个信道以电磁波为载体进行传输，所以说可以理解为电磁波就是一个工人，然后电磁波就可以背着这些比特流往前跑，所以这个比特流在信道上面传输的速率就是电池包在上面传输的速率。

假设电磁波在信道上面的传播速率是 `10m/s`，我们先不考虑这个路由器，就只看AB之间进行一个数据通信。

假设AB之间的距离是100m，那么A上的这些数据在起始位置，一直发送到B全部接收完毕，这样的一段时间就应该用 `(100m) / (10m/s)` ，也就是说通过10s我们这10个数据才可以从A的一端一直发送到B，这样一段时间才是我们的传播时延。

综上我们可以看到，传播时延和发送时延的主要区别就是发送时延它发生的是在这个主机内部的，一般就是发送在网络适配器中，即机器内部的发送器中；而传播时延是发生在机器外的，即信道上面的。

----

### 3）排队时延

排队时延：等待输出/输入链路可用说需要的等待时间。

如下图，我们可以看到我们现在的十个比特已经到路由器的这一边了，但是路由器它现在挺忙的，所以就要让它们几个先等待，它们等待其实是在这个缓存里面（路由器的每一个口都有一个缓存空间），它们会在这里面先待一会，待的时间其实就可以叫做排队时延。

![image-20240604211211383](./assets/image-20240604211211383.png)

----

### 4）处理时延

假如说等到它们了，那么路由器就可以开始进行一些转发的工作了，这个转发其实也是需要一定时间的，因为这个路由器它需要看你这些数据需要发到哪，然后并检查一下我们这样一个序列有没有出错，所以在检错和找出口这也需要一段时间，就需要我们这个**处理时延**。

因此路由器这主要发生的是排队时延以及处理时延。

---

### 5）补充

我们现在是1s可以传输10比特到链路上，如果把它换成1s可以传输100比特，因此我们的发送速率/信道带宽自然就提高了，那么在数据长度不变的条件下，我的发送时延肯定会变小，这个就是我们对于告诉链路正确的理解。

高速链路指的是：发送速率提高，而并不会影响到电磁波的传播速率，因为电磁波的传播速率只受两点影响：1、我是用什么传的；2、我们使用的是什么介质，如果对于这种固态的介质，尤其是光纤、同轴电缆等，基本上都是 `2 × 10的八次方m/s`，比如说我们的高速只是说提高了发送速率，提高了带宽，减小了发送时延，但是传播时延以及传播速率都是不变的。

![image-20240604211924015](./assets/image-20240604211924015.png)

----

## 二、时延带宽积

时延带宽积是一个非常有用的度量它指的是时延和带宽的乘积，注意，**这里的时延指的是传播时延**，带宽是发送端在发送数据时可以达到的最高数据率，强调的是发送速率，单位是 `b/s(比特每秒)`。

传播时延是指电磁波在信道上传播一定的距离所花费的时间，单位是s，因此 `时延带宽积` 的单位就是 `s × b/s = bit(比特)`，所以 `时延带宽积` 是一个用来描述数据量 / 信息量的一个性能属性。

<img src="./assets/image-20240605101701442.png" style="zoom:67%;" />

下面有两台主机A、B它们进行通信，那中间肯定有这样一条链路 / 信道，它可以是光纤、可以是同轴电缆、双绞线等，这条链路的长我们定义为传播时延，链路的横截面我们将它当做带宽，下面我们就结合这个图来理解一下时延带宽积是什么。

首先我们知道，`带宽` 指的是 `发送速率`，`传播时延` 就可以这样理解：1个比特经过一个传播时延，刚好就走过了这样一条信道。

第一个比特往前走的时候，其它比特照样往信道上面跳，一直跳，直到第一个比特碰到B为止，也就是第一个比特刚到B为止，发送停止，那么 `时延带宽积` 就是现在信道中所有的比特。

<img src="./assets/image-20240605103239729.png" alt="image-20240605103239729" style="zoom:67%;" />

**`时延带宽积` 又成为以 `比特位单位的链路长度`**，在上图中也就是说，这一段链路现在有多少比特，说的就是时延带宽积了。

因此时延带宽积是一个描述数据量，也可以说是这样一个链路中此时此刻的数据容量，这样一个性能指标。

<img src="./assets/image-20240605103515780.png" alt="image-20240605103515780" style="zoom:50%;" />

----

## 三、往返时延RTT

`往返时延RTT` 在生活中还是比较常见的，例如我们在打游戏的时候，游戏界面上面就会有RTT，大概是等于多少毫秒，那如果数字比较大，肯定打起来就非常卡，那如果数字比较小，打起来就很流畅也很爽。那我们来看下计算机网络中往返时延RTT是如何定义的。

`往返时延RTT` ：从发送方发送数据开始，到发送方收到接收方的确认（接收方收到数据后立即发送确认），总共经历的时延。

- 从发送方发送数据开始：指的是发送方的第一个比特刚放到信道上开始，这个时候才是我们起始的时间
- 到发送方收到接收方的确认：也就是收到我的第一个比特的确认为止

在终端输入 `ping命令`，然后后面可以加上IP地址/域名，此时就可以测出这个网络的往返时延是多少了。

如下图，我和百度的往返时延就是5.5毫秒左右。为什么它这个数字是不定的呢？因为我们这个网络本身就不稳定，如果你连国外的网，肯定这个时间会更长一点。

<img src="./assets/image-20240605104848404.png" alt="image-20240605104848404" style="zoom:67%;" />

有一个说法：RTT越大，在收到确认之前，可以发送的数据越多。

首先我们知道，RTT越大，我们就会等很久才能等到这样一个确认，在等确认之前，我们能干什么呢？就只能一直发送，所以说我等的越久，我能发送的自然就越多。

总结：RTT包括 `往返传播时延 = 传播时延 × 2`、`末端处理时间`

- 传播时延：电磁波在信道上传播一定距离所花费的时间，即在信道上的时间。往返传播时延那肯定就是2次来回的传播时延

- 末端处理时间：通常指的就是接收方可以会对这个数据进行一个处理，然后再发出一个确认帧

当然 `末端处理时间` 题目中要么就给，要么就说忽略不计。我们主要要注意的是RTT主要包括的是 `两倍的传播时延`。

根据这个我们可以看出，RTT是不包括发送时延的，也就是说它不包括把所有的数据从主机放到信道上这样一段的时间，它只管传播时延。

<img src="./assets/image-20240605110736547.png" alt="image-20240605110736547" style="zoom:67%;" />

----

## 四、利用率

`利用率` 顾名思义就是 `利用的效率`。

在计算机网络中，利用率分成两种，一种是信道利用率、另一种是网络利用率。

在这里举一个车道的例子，如下图是一个比较宽的车道，刚修好，现在开始行车，上面只有几台车，此时我们这个车道是没有被利用好的，浪费了，此时车道的利用率是比较低的。

<img src="./assets/image-20240605111155119.png" alt="image-20240605111155119" style="zoom:50%;" />

但如果这个车道上面铺满了车，就像下图，那就说明我们这个车道被完全利用了，所以说明我们这个车道的利用率比较高。

<img src="./assets/image-20240605111317941.png" alt="image-20240605111317941" style="zoom:67%;" />

在计算机网络中也是一样的，如果主机A和主机B进行通信的话，它们之间的这条链路就可以看这个链路的利用率是高还是低，主要就是我们这个链路有多长时间上面是有数据的，也就是说如果我们这个链路上面一直都有数据进行传输，那我们这个链路就用的很好，利用率很高；如果一直没有数据传输，利用率就非常低，接近为0。

所以利用率的计算如下图

<img src="./assets/image-20240605111953533.png" alt="image-20240605111953533" style="zoom:67%;" />

最后再看一张图，这张图表示的其实就是 `时延` 与 `利用率` 的关系，可以发现它们之间有类似于像凹函数的关系，而且随着利用率趋近于1的时候，`时延` 是无限的，急剧增大的。

<img src="./assets/image-20240605112056293.png" alt="image-20240605112056293" style="zoom:67%;" />

还是使用车道来理解，如果车道利用率将近 `100%`，也就是说车道上面全是车，那我们可以想到堵车的情况，每个车移动的都会非常缓慢，所以导致我们车辆往前走，例如走 `100m` 的时延，就要比平常的时延多很多。

所以在网络中也是一样的道理，如果利用率几乎达到百分之百了，信道上全都是数据，一直在跑，就会导致时延非常大，也就会最后导致速率其实又被降低了。

因此我们可以发现，为什么我们家里虽然是10M网，但是我们实际上加速球上面，或者是电脑右上角上面显示的一些下载上传速度可能只有十几K，其中有一个原因就是因为那个 `十几K/s`，k后面省略了b，那这里面的b其实应该是自己的k大写的b，所以要再乘以一个8，也就是接近于80多

另一个原因其实是，带宽其实是我们理想中能达到的最高数据率，在实际生活中是绝对不可能达到的，所以一定会被带宽要小。

![image-20240605113159242](./assets/image-20240605113159242.png)

---

## 五、总结

<img src="./assets/image-20240605114042626.png" alt="image-20240605114042626" style="zoom:50%;" />



---

# 1.2_1 分层结构、协议、接口、服务

## 一、为什么要分层？

我们知道主机在进行通信的时候，可以实现一些资源的共享。例如我这台主机要给你发送一个文件，那我发送文件一定要经过一条链路才能发送过去，不然中间如果没有介质，这个文件是怎么也到不了你那的。

<img src="./assets/image-20240605123139335.png" alt="image-20240605123139335" style="zoom:67%;" />

发送文件除了需要这样一条链路外，我们在发送文件之前还需要完成一些准备工作。

（1）发起通信的计算机必须将数据通信的通路进行**激活**。

激活：发出一些命令，保证我这个要传送的数据能够在这条通路上面正确的发送，以及正确的接收。也就是先将这条路清一下，确定好这条路是可以通过的。

（2）告诉网络如何识别目的主机。

因为我们知道在发送目的文件的时候，并不是我这台电脑满街跑，找到你的那个电脑，再把文件给你。而是可以把这个文档放到网络上，也就是放到云端上面，让它在云端上面进行一个传输。在云端上我已经管不到了，所以我们就需要靠网络来识别将数据放到哪里，要靠网络识别出目的的主机。

（3）发起通信的计算机要查明目的主机是否开机，并且与网络连接正常。

（4）发起通信的计算机要弄清楚，对方计算机中文件管理程序是否已经做好准备工作。

这里准备工作主要分为两种：1、你的这台主机是否已经做好接收文件的准备了；2、是否有空间来存储要接受的文件

（5）确保差错和意外可以解决。

因为我们知道计算机网络是一个非常庞大的网络，尤其我们这个互联网非常的庞大，所以在这种非常庞大的网络中，很有可能出现一些意外或者是差错，例如文件传输丢失了、重复传了、传送错误，那就一定要保证有一些可靠的措施，可以使对方的计算机能够接收到正确的文件。

所以说除了这五个之外，我们在完成发送文件之前要完成的工作还有非常非常多，所以遇到这么一系列的大问题放在一块，我们自己肯定难以解决，那对于计算机网络他自己也是这样，这么多问题堆在一块，当然很难解决。

所以计算机网络它就想到要把这个大问题分成一系列的小问题再去解决它。

<img src="./assets/image-20240605143959654.png" alt="image-20240605143959654" style="zoom:50%;" />

由于分层结构非常的抽象，我们就先把这个分层的过程形象化。

----

## 二、生活例子

假如说我有一瓶82年的拉菲要给你邮寄过去，首先需要进行包装，这是一个软包装的过程，可以往里面放上一些棉花，给它填充好。

接下来就可以给它放到一个木箱里面包装好，邮寄过去，那我就要给它送到快递公司，至于是陆运还是空运，这我们就不需要管了。反正它就是经过几天的运输，就运输到你家。到你家后你肯定要拆开这个包裹了，第一步你先把这个木箱拿开，第二步将软的棉花、填充物取出来，第三步你就可以拔开木塞享用这个82年的拉菲了。

<img src="./assets/image-20240605144449040.png" alt="image-20240605144449040" style="zoom: 33%;" />

这是一个非常简单的，也是一个非常常见的生活实例，在计算机网络中分层也是这个过程。

我们再结合这个例子来看一下，在计算机网络的分层结构中，有一些具体的名词，分别对应着什么意思。

### 1）实体

首先就是这个实体，实体指的是：每一层中这个活动元素就叫做实体。例如这一层我们都是酒，这两个酒它们就是实体，而且它们在同一层，所以就叫对等实体。

<img src="./assets/image-20240605144730546.png" alt="image-20240605144730546" style="zoom:50%;" />

---

### 2）协议

再来看下一层，这一层酒上面都有棉花，即给它装上棉花；右边其实是将棉花给它拿出来，但同样都是对于棉花的一种操作，所以它们两个活动对象也是很类似的，也叫作实体，或者说这两个叫做对等实体。

接下来看第二个名词：协议。协议指的就是一系列的规则或者约定。例如在这一层我们规定对于棉花应该怎么塞、怎么拿，这个就是我们对于这一层的要求。

<img src="./assets/image-20240605150520412.png" alt="image-20240605150520412" style="zoom:67%;" />

其他的每一层都会有对应的协议，要注意的是协议是水平方向的，也就是说只有对等实体之间才会有协议。

----

### 3）接口

接下来看第三个名词：接口。接口是每两层之间的这样一个关节处的位置就叫做接口。

例如我们手指的关节，这个关节就是我们这里所说的接口。不过在计算机网络中这个接口它是一个逻辑性的接口，之后我们还会做展开。

<img src="./assets/image-20240605150837108.png" alt="image-20240605150837108" style="zoom:50%;" />

----

### 4）服务

第四个名词就是服务。

服务指的是：每两个层次之间所提供的东西。但是要注意在计算机网络中，上层是使用下层的服务的，也就是说下级是需要为上级提供服务的；当然在右边也是一样，下面的要为上面的提供服务。

<img src="./assets/image-20240605151147403.png" alt="image-20240605151147403" style="zoom:50%;" />

以左边为例子，下面是如何给上面提供服务的呢。我们知道，我们要将酒邮过去，就一定要经历装木箱的过程，所以第二层要求的服务就是：你把它装木箱，然后把我送走，这个就是上次需要下层提供服务，即上层要求服务，下层提供服务。

----

## 三、如何分层

82年拉菲的层次是我们已经分好的，在计算机网络中这个分层的基本原则有哪些呢？

### 1、各层之间相互独立，每层只能实现一种相对独立的功能

例如装棉花，这一层实现的是软包装的功能，所以说每一层是一种相对独立的功能

---

### 2、每层之间的界面自然清晰，易于理解，相互交流尽可能少

也就是在强调这个接口的问题，每层之间的接口一定要说明这两层之间是如何进行这种服务的交流的，而且呢这种交流要尽量的简介，并直观明了。

----

### 3、结构上可分隔开。每层都采用最合适的技术来实现

每两层之间是不会相互影响的，所以每一层它只需要管自己，用一个最合适的技术就ok了。

---

### 4、保持下层对上层的独立性，上层单向使用下层提供的服务

就是我们刚才讲的，这个服务上面的层次是要使用下面层次的服务，而反过来说就是：下层可以为上层提供服务。

---

### 5、每个分层结构应该能促进标准化工作

因为每一层的功能及其所提供的服务都已经有了非常精确的说明，所以说整个分层结构就是能促进标准化工作的。

拿着其实也算是这个分层的一个好处，讲的这些都是结合我们这个比较形象化的例子，来讲如何分层以及分层结构当中的一些具体的名词。

<img src="./assets/image-20240605153129678.png" alt="image-20240605153129678" style="zoom:50%;" />

接下来我们就非常正式的认识一下分层结构。

---

## 四、正式认识分层结构

这个图就表示计算机网络中正式的一个分层结构，其中网络各层数据单元的关系也在这个图中展示的很清楚了。

<img src="./assets/image-20240605153342298.png" alt="image-20240605153342298" style="zoom:67%;" />

接下来看这个图来回顾一下刚才讲过的名词

### 1）实体

实体：第n层中的活动元素称为 `n层实体`。同一层的实体叫 `对等实体`。

例如图中的第五层，它就可以叫做实体，与它相对应的另外一端主机的第五层，就和它成为了对等实体的关系，它们俩的层次就叫做对等层。

---

### 2）协议

协议指的是一系列的规则和约定。

这样一组协议或者一系列的协议，就可以规定某一层次的功能。

**协议：为进行网络中的 `对等实体` 数据交换而建立的规则、标准或约定称为网络协议。【水平】**

因为我们说协议它是对等实体之间的一种规定，来规定这些层次它们可以做什么事情，有什么功能，所以说是水平的。

那如果说四层的协议和三层的协议，它们是不可以相互是使用的，所以每一个协议它们只是对等层次之间来使用的。

这个协议有三要素，分别是：语法、语义、同步。

拿01的一个比特序列来说一下这三个名称是什么意思

<img src="./assets/image-20240605160752949.png" alt="image-20240605160752949" style="zoom:67%;" />

- 语法：规定传输数据的格式。

  我们的数据首先是按0、1这种数字形式来传输，其次数据它从哪个地方分隔，哪个起始，哪个结束，这个就是语法所规定的内容。

- 语义：规定所要完成的功能。

  因为我们这个比特序列它有非常多的数字，但是它每段根据刚才的语法，每一分段它代表的意思也不同，所以规定这个每一段有什么意思，能实现什么功能，就是语义。

- 同步：规定各种操作的顺序。

  例如规定是哪个数据包先发，哪个数据包后发，这个就是对于操作顺序的一种规定。

这三个要素都是协议缺一不可的。

---

### 3）接口

接口也叫作 `访问服务端SAP`：上层使用下层服务的入口，当然也是下层为上层提供服务的一个接口。

在图中我们可以看到，每两个层次，而且是相邻层次之间，都会有这样一个接口，只有通过这个接口才能作为一个桥梁，才能是的上下两层练习起来，而且这种练习是要使用服务。

<img src="./assets/image-20240605153342298.png" alt="image-20240605153342298" style="zoom:87%;" />

---

### 4）服务

服务：下层为相邻上层提供的功能调用。

要注意一点：服务式单向的，只有下层为上层**提供**服务，上层是**使用**下层的服务。

第二点要注意的是：服务是垂直方向的，刚好和刚才的协议是相对的。

为什么说垂直？因为它是上下两层之间的名词，而协议是相同层次 / 对等层次之间的名词，所以服务是垂直的，而协议是水平方向的。

同时要强调的一点：例如第四层的服务，它是使用第三层的服务，但是它为第5层提供服务，也就是说每一个层次，它都为上层提供服务，同时使用下层及下面的所有层次的服务的总和。

<img src="./assets/image-20240605165127770.png" alt="image-20240605165127770" style="zoom:67%;" />

---

### 5）包含关系

如下图，是将网络各层的数据单元进一步的抽取出来，将第五层、第四层、第三层分别抽出来，我们来看一下这三层之间存在一些什么数据包含关系。

- SDU(服务数据单元)：为完成用户所要求的功能而应传送的数据。

  说白了就是我们这每一层要传送的数据，也就是有用的那些部分，即有含金量的部分，就叫做SDU。

- PCI(协议控制信息)：控制协议操作的信息。

  我们可以简单的把它理解成一些控制信息，这个控制信息PCI加上我们真实有效的这个含金量比较高的数据后，就得到了PDU。

- PDU(协议数据单元)：对等层次之间传送的数据单位

  也就是说PDU就是继续往下传的一个数据单位，这里说是对等层次之间传送的数据单位也是可以的，所以根据这个图我们也可以看到，PCI + SDU 就形成了这样一个数据单元PDU，然后这个PDU作为下一层的SDU。

  作为下一层的SDU之后，再加上这一层的PCI控制信息，又得到了一个新的数据单元，这个新的数据单元继续往下作为下一层的服务数据单元，也就是成为下一层的那个含金量比较高的数据，再加上下一层的控制信息，就得到了下一层的PDU协议数据单元，然后再往第一层，也就是物理层来传，这个就是我们这个协议数据单元的传输过程。

<img src="./assets/image-20240605164618086.png" alt="image-20240605164618086" style="zoom:80%;" />

---

## 五、概念

这节在将将分层的时候遇到很多抽象的概念，不好理解，所以这里来逐一总结一下。

**网络体系结构是从`功能`上描述计算机网络结构。**

而不是从物理层上（物理的硬件）来描述，因为我们知道根据这个功能的不同，我们可以把要解决的问题分成各个小问题，然后每一个小问题变成一个层次所需要解决的，这就是我功能对应的每一层次，所以是从功能上来描述网络结构。

**计算机网络体系结构简称网络体系结构是`分层结构`。**

**每层遵循某个/些`网络协议`以完成本层功能。**

我们说了这个协议是一系列规则，或者是约定，它规定了每一层的对等实体，它们之间要完成哪些功能，所以这些协议是来规定功能的。

**`计算机网络体系结构`是计算机网络的`各层及其协议`的集合。**

如果这道题考察计算机网络体系结构都包括什么？我们就可以说：它博阿凯这个计算机网络中的各个层次，以及各个层次需要完成的功能，当然还包括每一层次所对应的一些协议，当然对于具体协议的内部实现细节，这个网络体系结构它是管不了的，因为它只是一个抽象的大的架子的概念，而不会管具体如何去实现。

**第n层在向n+1层提供服务时，此服务不仅包含第n层本身的功能，还包含由下层服务提供的功能。**

我们知道在这个计算机网络中，对于服务这个词，我们要记住的就是，只有相邻两层之间才能说他们提供服务，而且这种服务是单向的，只有下层为上层提供服务，上层只有使用下层的服务，所以说如果我这一层在使用下层服务的时候，自然就使用到了下层所有层的服务，同时我这一层作为一个下层，它还要为上一层提供服务。

**仅仅在`相邻层间有接口`，且所提供服务的具体实现细节对上一层完全屏蔽。**

这个完全屏蔽就有一种透明的概念了，也就是说我下面那一层它是怎么实现的我不用管，我只需要使用它给我提供的服务就行了。

而且这个接口是只有相邻层之间，例如第五层、第四层之间有接口，四层和三层之间有接口，但是第五层和第三层之间是不存在接口的，而且第三次和第五层之间也不能直接进行服务上面的交流。

**体系结构是`抽象`的，而实现是指能运行的一些软件和硬件。**

我们说了这个体系结构，计算机网络中的这个分层结构，它是一个抽象性的概念，只是规定了一个架子，但是具体怎么实现是你这个厂家，不同的厂家它可以自己实现，可以用不同的语言，C语言、Java都可以，而且这些硬件软件也没有固定的要求，都是结合自己厂家本身来实现。

---

## 六、总结思维导图

<img src="./assets/image-20240605171423683.png" alt="image-20240605171423683" style="zoom:67%;" />



---

# 1.2.2 OSI参考模型（1）

## 一、引入

在上节我们学习了在计算机网络中非常重要的分层结构，那这个分层结构是怎么来的呢？就是因为计算机网络要解决的问题非常大，而且非常复杂，所以我们要把这一个大的问题分成很多小问题，然后逐个击破，并且我们把这些小问题做一个非常好的分类，就把每一类化作一个层次，一个层次就负责一个特定的功能，因此我们就把这个计算机网络要解决的大问题抽象成一系列的小问题。

那接下来我们就研究一下这个封层结构它又分为哪几种。

这两个主要的区别就是，上面的这个是一个法定标准，也就是说这个是法定规定的一个计算机网络的参考模型的标准。

但是由于这个市场使用最后感觉四层使用的效果比较好，所以四层的参考模型就成为了我们现在的事实标准。

也就是说我们现在通用的都是这样一个参考模型，但是上面OSI参考模型会跟我们的学习以及生活提供很多的经验。

根据这两个模型我们就能总结它们的一些优点和缺点，然后得到一个新的这样一个五层的体系结构，这个五层体系结构其实是为了我们学习更方便，能够让我们在学习计算机网络的过程中让我们思路更清晰才产生的。

<img src="./assets/image-20240605174907113.png" alt="image-20240605174907113" style="zoom:67%;" />

这节我们先来学习一下上面这个：7层OSI参考模型，因为下面两层（四层和五层）都是基于OSI的，所以如果我们把它搞懂了，另外两个也没有问题。

---

## 二、ISO/OSI参考模型 —— 怎么来的？

首先我们要知道，为了解决计算机网络复杂的这个大问题，我们将大问题分成小问题，因此就产生了这样一个分层结构，而且每一层都是按功能来分的。

根据这个分层结构，肯定有的公司就有自己的想法了，那世界上第一个提出一个网络体系结构的就是IBM公司，它提出的就是SNA的一个网络体系结构。

接下来就有很多公司分别效仿，创造出了自己公司的特定的网络体系结构，例如DEC公司的DNA、美国国防部的 `TCP/IP`，也就是我们现在常用的这个网络体系结构，还有很多很多不出名的小公司，他们也都提出了自己的网络体系结构。

<img src="./assets/image-20240605180431492.png" alt="image-20240605180431492" style="zoom:50%;" />

但是我们要知道，比如IBM公司，它们提出的SNA网络体系结构，只有使用IBM的产品才能够用这样的一个体系结构，所以我们可以看到，不同公司只有你使用它们的产品才能使用它们的体系结构，所以这样对于所有人进行网络上的互联互通是非常困难的，因为我们是居于不同的公司才能够进行一个公司内部的通信，但是不能达到像我们现在这样全球各地都可以进行一个通信，因此为了解决这种情况，为了支持异构网络系统的互联互通，也就是支持不同的网络体系结构，所以就产生了这样一个OSI参考模型。

这个参考模型是 `国际标准化组织ISO`，在1984年提出 `开放系统互联(OSI)参考模型`。

- 这里面的开发指的就是非垄断的，因为我们看到之前的这些网络体系结构每一种都是被一家公司所垄断。

- 系统指的就是：不同的网络、不同的设备、软件、硬件等，都可以在网络上面进行一个连接，通过这样一个参考模型，我们就可以实现这种网络之间的连接。

但是有一个点要注意的就是：OSI参考模型它的理论是很成功的，对于我们的学习、研发有非常多的借鉴意义，但是在市场上是失败的。

OSI参考模型失败的一些原因，我们可以给它归纳为四种。

- 第一个就是OSI专家们他们比较缺乏实际经验，它们只是构想的很好，但是实操上面它们没有什么经验。
- 第二个就是OSI协议实现起来比较复杂，而且运行效率非常低。
- 第三个就是OSI标准的制定周期太长了，所以使得OSI模型出来的时候没有办法及时的进入市场，而且已经有这个非常好的 `TCP/IP` 可以在市场上使用了，所以OSI它可以说是出生的有些晚了，生不逢时。
- 第四个就是OSI的层次划分不是很合理，有些功能会在多个层次中重复的出现，它会有一些弊端，不太适用于我们这个市场的需求，而这个 `TCP/IP` 就比较适合现在市场的应用，所以OSI参考模型就被这个 `TCP/IP` 打败了，它只能成为一个历史，成为一个法定的标准。

但是呢它会有一些值得我们借鉴的东西，所以OSI参考模型还是有非常高的学习价值。今天我们就来学习一下OSI参考模型。

---

## 三、ISO/OSI参考模型

首先 OSI参考模型 是一个七层的结构，自下而上分别是，如下图

最高层次就是第7层，最低层次物理层也就是第1层，我们自下而上分别提取出它们的每一个字，所有字提取出来后发现它读成一个顺口溜：物联网淑慧试用。

我们就可以这样记：有一个叫淑慧的女生又贤淑又贤惠，她第一次使用这个物联网，物联网大家知道，就是一个物联系起来的网络，例如淘宝就是就可以把各种物品联系起来的一个网络的应用。

<img src="./assets/image-20240605191346051.png" alt="image-20240605191346051" style="zoom:50%;" />

在这里面还要讲的一点，其实也是复习的一点，就是有关于分类的问题。计算机网络按照功能可以把它分成资源子网以及通信子网。

在这七层中，下三层代表的就是通信子网，通信子网主要。负责的是数据通信。

那么上面三层其实就是资源子网，上面三层的一些软件才可以叫做资源子网，它是主要负责数据处理的。

而传输层它是资源子网以及通信子网的一个接口，我们就不需要记忆它，它起到一个非常重要的融会贯通的作用，这个传输层主要是为了弥补上面三层要求的服务和网络层提供的服务之间的差距，并且向高层用户屏蔽这个通信子网中的一些细节，所以这个层次也是非常重要的。

我们知道OSI七层它是一个分层结构，每一层都对应着一种功能，或者是几种功能。

<img src="./assets/image-20240605201641481.png" alt="image-20240605201641481" style="zoom:50%;" />

接下来我们就通过一个通信过程的实例，来研究一下这个OSI参考模型它的每一层都实现了哪些功能。

----

## 三、ISO/OSI参考模型解释通信过程

比方说我们这里有两个主机A和主机B它们两个要进行通信，例如想在QQ上面进行聊天，如果要进行这种联网上的通信的话，就一定要有一些中间系统来介入，例如常见的就是路由器，还有网桥交换机，这些在之后都会学到，都叫做中间系统。那我们这两个主机之间进行通信，或者是连通，不能说我发一条信息，这个消息直接飞到你的主机上面，这是不可能的。这两台主机如果要实现通信，要经过很多很多的步骤，也就是我们这个OSI七层参考模型，每一层它们都应该用的到，所以说我们这个虽然表面上看来这个通信很简单，但其实水特别深，它上面有非常多的说道。

这个A和B两台主机，它们两个座位通信的两端，这两个端系统都需要经过这样七层的一个考验；而中间这个系统，例如路由器，它只需要经过三层，像交换机和网桥这些链路层上的一些设备，可能只需要经过下面的两层（数据链层、物理层）就行了，中间系统最多只会到网络层，而其他的这些端系统主机是七层都要经过的。

<img src="./assets/image-20240605214053456.png" alt="image-20240605214053456" style="zoom: 50%;" />

接下来我们看一下这七层都会对这些数据做些什么。

首先物理层有一个传输介质，可以是光纤、电缆等，我们知道，如果两个进行通信，这种东西想起来是非常抽象的，它抽象就一定要最终形象到一种传输介质上，才能使我们这个信息传输过去，不然我们空想它们是到不了那的。

![image-20240605214633141](./assets/image-20240605214633141.png)

每个对等层次、实体之间，都会有一个协议，例如主机A的应用层和主机B的应用层，两个主机的应用层之间就会有一个协议来规定两台主机应用层都应该实现相同的功能。

例如`主机A的数据链路层`和`中间的链路层`之间也会有一定的协议来规定这两个链路层它们的功能应该都是一样的。

![image-20240605214851755](./assets/image-20240605214851755.png)

如下图蓝色线路，就是一个在通信过程中OSI参考模型所做的一些事情。

![image-20240605215607342](./assets/image-20240605215607342.png)

---

下面再将一个小知识点：我们会发现上面四层和下面三层有点不太一样，即中间系统它是不会有上面四层的，上面四层的功能是中间系统是用不到的，所以说我们上面四层就可以看成这个主机A和主机B相对应的层次，它们就相当于直接就连在一起了。

就好像我给你写一封信，虽然这封信要经过邮局、还有一些快递处理和运输才能到达你哪，但是在我看来，我的信好像就直接传送给你了一样，我并不会考虑中间过程。上面四层其实也是这样一个效果，就好像直接由主机A传到了主机B，也就是直接形成了这样端与端之间的连通。

下面三层就需要进入到中建系统了，例如我们主机的下一步应该是要传给中间系统，那如果中间系统(路由器等)比较多，那这个中间系统可能还会传给下一个中间系统，最后才会到达主机B，所以它每一次对于数据的这样一个传播过程是点到点的，它只是管我下一步，即下一步要走到哪里，而它不会去管我最后的终点。

因此上面四层是端到端的通信，而下面三层其实是点到点的方式。

![image-20240606084017615](./assets/image-20240606084017615.png)

接下来我们来看一下层次对数据具体是怎么操作的。

---

## 四、A到B通信过程

刚才我们说我们的应用层首先要对这样一条消息 / A要发送给B的数据，进行包装，或者是贴上去了一个东西，这个东西其实叫做一个头部 / 首部，它是一个控制信息，这个控制信息包括一些检验差错的东西，比如说贴上这个信息，然后这个信息来检查我这个数据有没有发生错误；还有可能这个控制信息它是找下一步我要往哪里传，即下一步的地址是哪里。

所有的控制信息它可能包含的是：我要规定我这条数据它的优先级是什么，例如很多数据在一块，我能不能让这个数据先传一点，或者先对这个数据进行处理，这都是控制信息它可以加上去的内容，所以我们在每一层都可以加上控制信息。

我们可以看到应用层首先对数据加了一个头部，这里使用H，7就是代表加的事第七层的头部。

这个数据加上应用层的头部控制信息后，就形成了第七层的PDU(协议数据单元)，再加上第六层，也就是 `表示层` 的头部，又形成了一个新的第六层的PDU。

第六层PDU继续往下传到会话层，再加上会话层的首部H5，就形成了第五层的PDU。

然后第五层PDU继续往下传，再加上传输层的首部，形成了传输层的PDU。

然后传输层PDU再往下传，加上网络层的首部，就形成了数据链路层的PDU，这里要注意的是，这个数据链路层它不仅加上首部，还加了一个尾部，可以看到它加了两块。这个地方大家如何记忆呢？七层里面只有数据链路层是五个字，多了两个字，而其他的都是三个字，所以数据链路层加的东西就有点多，它加的是两个部分。

最后物理层，它是一个傻瓜层，它对于我们这个拿上来的数据就不会再去做其他额外的处理了，它只是把它形成一个0101这样一个比特流序列的方式，然后放到我们下面的传输介质上进行传输。

传输中间的中间系统我们就不先考虑了，假设现在已经到B了。

首先就是对物理层进行一个处理，给它变成数据链路层的这样一个数据形式，接下来数据链路层因为跟左边的数据链路层它们是用了同样的协议，所以右边的B它就知道如何去掉这些头部和首部。

去掉头部和尾部后，就形成了网络层，继续网络层网上继续还原，再去掉网络层的首部，形成了传输层这样一个数据。

B的传输层由于和左边A的传输层都用一样的协议，所以传输层可以识别出来首部是谁，传输层将首部识别出来后去掉，往上再传，传给会话层，继续会话层再进一步还原，还原给表示层的数据。

然后再一步表示层还原，最后还原成应用层的数据，最后应用层能识别出自己的首部来，因为它和左边用的是一样的协议，所以它把首部识别出来以后去掉，还原成的数据，再传送给B，这就是他们通信的过程。

这个很类似我们生活中打包和拆包的过程

<img src="./assets/image-20240606091954681.png" alt="image-20240606091954681" style="zoom:50%;" />



----

# 1.2.3 OSI参考模型（2）

这节学习OSI参考模型它们各层的功能，以及各层所对应的一些重要的协议。

## 一、应用层

首先我们从最上面的一层开始，也就是应用层。因为我们可以根据这个OSI参考模型图看到应用层和主机是这里最近、最相邻的，应用层是用户与网络的界面。

看到这个词 `应用`，我们就要想到这个层次应该是面向用户的，所以我们来定义一下这个**应用层：所有能和用户交互产生网络流量的程序。**

产生网络流量：只要你连上网才可以使用的程序，就是属于应用层的范畴。但是如果你不用联网也可以使用，例如记事本，这样不需要联网的程序，它就不算应用层的范围。

所以这就是应用层的定义，它是用户与网络的界面，也是OSI参考模型的最高层。

例如QQ，或者一些可以发送电子邮件的邮箱，都是我们应用层的范畴。因为应用层使用的一些应用程序多种多样，而且现在就是开发应用程序的人越来越多了，所以导致我们这个市场上面应用层的程序层出不穷，比较常见的，典型的应用层服务：文件传输（主要协议是FTP）、电子邮件（使用的协议主要是SMTP）、万维网（这个万维网其实就是我们常说的 `3w web网`，web网用的协议就是HTTP），这三个协议都会在我们最后一章学习应用层的时候涉及到，所以在应用层这一块，我们需要记住的就是一些典型的服务以及它们的协议。

<img src="./assets/image-20240606094553986.png" alt="image-20240606094553986" style="zoom:50%;" />

----

## 二、表示层

表示层是应用层紧邻的一个层次。根据字面意思我就可以看出表示层它主要负责的就是最后呈现在我们的设备，或者屏幕上都有哪些东西，所以**表示层主要用于处理在两个通信系统中交换信息的表示方式**，通常是对于语法和语义的处理。

两个通信系统指的就是任何两台设备，手机、电脑都可以交换信息，交换信息就是两台设备之间进行一个数据传递的过程。

表示层的功能如下

### 功能一：数据格式变换

数据格式变换，原因是因为我们不同主机它的编码以及表示方式都可能不太一样，所以为了使不同的主机能够进行数据/信息的交换，就需要这个表示层它实现数据格式变换的功能，也就像是一个翻译官的角色。

假设数据链路上传输的都是比特流的形式，最后传到你的主机上，也就是传到接收端上，我想要看到的是一个图片，这时候就需要让表示层出马，它就要将比特流的形式转换成jpg的数据格式，因此这就实现了数据格式变化的功能。

<img src="./assets/image-20240606100459305.png" alt="image-20240606100459305" style="zoom:50%;" />

----

### 功能二：数据加密解密

有的时候我们可能会在微信聊天、QQ聊天上说一些比较隐私的话题，例如我要告诉你我的微信支付密码是多少。

这样一句话放在链路上传输的时候，就要先对它进行加密，在发送端进行加密后，再放到链路上传输。

如果不加密，这样可能会从这个链路上面抓包，把这个信息拿下来，相当于就是盗了你的支付密码，这是非常危险的，所以需要一个加密的过程。

然后到了接收端，也就是到了你发送的那个人的手机那边，它就会对于这样一条数据进行解密，解密下来的结果就是发送的这句话，最后呈现在接收端的手机屏幕上。

<img src="./assets/image-20240606101042074.png" alt="image-20240606101042074" style="zoom:67%;" />

----

### 功能三：数据压缩和恢复

例如我们在跟别人视频聊天的时候，聊天的图像非常大，我们要先把图像进行压缩，然后再传到链路上，最后到接收端的时候再将压缩的文件解压缩，然后这个图像就可以呈现在接收端那边的屏幕上了。

表示层其实不是一个特别单独的层次，这个在之后学 `TCP/IP` 以及我们的五层结构的时候就会发现，表示层其实它会被纳入到应用层/会话层里面，所以表示层没有什么单独的协议，如果你非要说一些跟表示层有关的协议的话，可以有 `JPEG、ASCII` 等，但是这些都不是我们考试的内容，所以大家有一个了解就可以了。

<img src="./assets/image-20240606101224473.png" alt="image-20240606101224473" style="zoom:67%;" />

---

### 总结

![image-20240606101448348](./assets/image-20240606101448348.png)

---

## 三、会话层

### 1）介绍

会话层是位于表示层下面的一个层次，也就是说表示层要使用会话层所提供的服务。

首先我们可以想这样一个场景：假如你给你同学打电话，那你们这个电话还没有打通，刚拨好号，那你说的话它能听到吗？当然是不能的。这个就相当于会话层与表示层的一个关系，会话层主要就是先建立好一个连接，连接先建立起来，然后数据才能传过去，进而表示在这个设备的屏幕上面。

**会话层：向表示层/用户进程提供`建立连接`并在连接上`有序`地`传输`数据。**，这是会话，也是`建立同步`（SYN），这都是会话层负责的，或者说是会话层的功能

- 进程：指的是正在运行的程序。
- 提供建立连接：就像刚才我们打电话的例子一样，要连通
- 在连接上`有序`地`传输`数据：打电话时我说的话你能听得到，这就是在连接上`有序`地`传输`数据

我们可以先举一个例子，假设这里有一台电脑，电脑需要用浏览器访问一些网页，首先我访问到的是百度的网页，但我还没有关闭，此时我又访问了一个新的网页，这个网页可以让我看一些电影，现在呢就说明我这个电脑已经跟这两个网页 / 窗口已经建立起了同步，但是现在还没有进行数据的传输。

假如我现在正在看的电影，我点快进，想多往后看几秒，点了快进后，它应该马上就会有一个回应，电影的画面应该就会往前播放几秒了，而不会导致左边的百度发生什么变化，这个就是因为主机和这个电影服务器之间建立的一个连接，即一个会话，是不会影响到主机和其他的窗口所建立起来的会话，所以我在这样电影窗口上面进行的一些操作，最后影响的还是会话当中的这个对象。

这就是因为我们会话已经建立好了，会话之间是彼此独立且不会相互影响的。

<img src="./assets/image-20240606104044177.png" alt="image-20240606104044177" style="zoom:50%;" />

最后总结一下会话层的功能

---

### 2）功能

#### 功能一：建立、管理、终止会话

这个就是我们刚才所说的，打开一个网页，就相当于是已经开始建立起一个会话；关闭这个网页就是把回话终止了

---

#### 功能二：使用校验点可使会话在通信失效时从校验点/同步点继续恢复通信，实现数据同步

校验点：加入我们要发送一个特别长的数据，我们就会在这个数据流的几个部分分别切开，然后插入一个校验点，或者叫同步点，它的作用就是，万一我们网络出现问题了，通信失效了，会话突然被停止，我们就可以恢复到刚才的同步点的那个地方继续通信，在离校验点最近的位置重新传输。

适用于传输大文件。

最后说一下会话层的主要协议ADSP、ASP，这个都不用怎么记忆，只要是有个印象就可以了，考试是不会考的，我们要知道协议它都是为我们这个层次的功能所服务的，就是说每一个协议它都是会规定我们这一个层次具体的一种或者几种功能，只要知道协议和功能之间的关系就ok了。

<img src="./assets/image-20240606111933621.png" alt="image-20240606111933621" style="zoom:47%;" />

---

## 四、传输层

### 1）介绍

传输层首先是作为自下而上第一个面向端到端通信的层次，同时也是上面三层资源子网和下面三层通信子网之间的一个接口。

传输层：主要负责的是主机中`两个进程`的通信，及`端到端`的通信。传输单位是报文段或用户数据报。

<img src="./assets/image-20240606151835332.png" alt="image-20240606151835332" style="zoom:50%;" />

上面四层是端到端通信，而下面三层都是点到点的通信，因为我们知道在两台主机进行通信的过程中，还需要一些中间的系统，例如路由器、交换机等，这些设备它只需要经过下面三个层次就行了（网络层、数据链路层、物理层），上面四层它们是不需要经历的。而两个端系统 / 主机，它们是需要经过全部的七个层次，那为什么叫端到端通信呢？因为端到端通信指的是运行在不同主机内，两个进程之间的通信，而每一个进程都会用一个编号来标识它，这里叫端口号，所以是进程与进程之间的通信，也就是端到端的通信，它们的名字就是这么来的。

那我们如何分辨，即如何记忆端到端和点到点。我们可以这样想：上面四层，即一些大老板，这些大老板它要发送一些文件给另一个地方的公司，它不需要管文件到哪了，它只需要知道这个文件最后要发给哪个公司就行了。而下面三层，它们不仅要知道最后要去哪，而且主要的还是要知道下一步要往哪走，所以它们给我们看来就是一种：从几个点到另一个点，一步一步往前走这样一个过程，所以它们三个叫点到点的通信。

接下来看一下传输层的四大功能：

1、**可**靠传输、不可靠传输

2、**差**错控制

3、**流**量控制

4、复用**分**用

这里将关键字都标红了：可差留用，可差的也能留用？因此对于这种情况我们是绝对不能认输的，输是传输层的 `输`。

<img src="./assets/image-20240606154237883.png" alt="image-20240606154237883" style="zoom:50%;" />

接下来分别解释这四个功能

---

### 2）功能

#### 可靠传输、不可靠传输

假如这里有两台主机进行通信，中间有很多个路由器构成了一个比较庞大的网络。

<img src="./assets/image-20240606162355269.png" alt="image-20240606162355269" style="zoom:50%;" />

**可靠传输**：例如我们发一个pdf文件，这个文件挺大的，我们就需要将它先切成报文段，即这样一个传输单位，然后一个一个的放到链路上进行传输，传输到接收端后，对于每一个收到的报文段接收端都会返回给它一个确认告诉你：我收到了，你可以发下一个了。

然后发送端收到了这个确认信息后才能继续往下发送。但如果有一天，它突然发现你怎么没消息了，你到底收没收到？此时它就会再发送一遍刚才的报文段，直到收到对于这个报文段的确认为止，才能再往下继续发送新的报文段。在这个就是可靠传输一个确认机制的过程。

**不可靠传输**：不需要建立连接，然后也不用管它会不会丢，也不用管这些确认机制，就直接将数据包放上去发就行了。

通常一些应用，例如发送一些比较小的数据的时候，有可能是我们在qq上发送信息的时候，这一句话确实是一个报文段就能解决的问题。所以对于一个非常小的数据我们是没有必要先建立连接，然后再用确认机制，因为这样特别耗时，而且也很麻烦，所以我们采用的就是这种不可靠传输的方式。

----

#### 差错控制

顾名思义就是对于发生的任何差错进行控制，例如我们传输的一些报文段失去了、顺序错了，然后我们传输层就会负责来纠正这些错误。

---

#### 流量控制

这个流量可不是我们正常使用的几M流量、及G流量，这里所说的流量是一个我能不能跟得上，或者说咱俩的速度匹不匹配的问题。

例如这边我再给你发送一大长串的数据，或者是发送很多文件，然后你这边你的接受能力是有限的，你不可能一次性接收那么多。所以差错这个流量控制，指的就是：控制一下这个发送方的速度，也就是说如果接收方来不及接收了，或者接不动了，那么发送方就需要慢一点了，这个过程就叫做流量控制。

---

#### 复用和分用

复用：多个应用层进程可同时使用下面运输层的服务。

分用：运输层把收到的信息分别交付给上面应用层中相应的进程。

例如有两台手机，它们用QQ和微信进行通信，而且这两个程序都已经打开了，已经变成了两个进程。

我们先来看一下什么是复用。端口号大家还记得吗？即每一个进程都会分配一个端口号来标识它，它是独一无二的端口号。

假如说我们暂时把QQ这个端口号标为1，微信进程端口号标为2。现在左边的手机要给右边的手机发消息了，而且QQ和微信这两个程序都要发消息，我们就将发送的消息以这个报文段(下图中的蓝色部分)的形式然后放到传输层上面，再进行下一步的传输，要注意的是，它们在形成报文段之后，每一个包含QQ的报文段它上面会带有一个信息：即QQ程序的端口号是几，另一个呢，如果是包含微信要发的消息的报文段，那这个报文段上面就会有一个信息，说微信的端口号它所对应的是2。

<img src="./assets/image-20240606162519064.png" alt="image-20240606162519064" style="zoom:50%;" />

那我们这个数据其实就可以说是这些进程使用了运输层 / 传输层的服务，接下来数据发送到接收端，接收端就要开始把这些数据取出来了，至于怎么取，就需要我们刚才所说的端口号，因为报文段可能有很多个，我们就看它分别对应的进程的端口号是多少。假设这一块蓝色的数据它的端口号是1，现在这个接收端它就知道了：你这条数据是要发送给QQ的，此时它就会把这个数据发给QQ。

然后又看到另外一个报文段，它所对应的端口号是2，也就说明接收端懂了，这一条数据是要发送给2号进程，也就是微信进程的，所以它就把这个数据分给对应的微信进程。

因此有了端口号才能够保证我们接收到来的一系列很复杂的数据都能走到自己对应的位置，然后回到自己的老家。

复用和分用可以理解为，从一座城市的不同商家（进程）发出的快递（数据包）上了同一辆运输车（复用），到了驿站后根据取件码（端口号）让每个收货人（目标进程）取走对应的快递（分用）

下面再来说一下传输层的两大协议：TCP、UDP，这个在传输层章节会具体展开来讲

----

## 五、网络层

### 1）介绍

网络层也叫作 `IP层 / 网际层`，它是自下而上的第三个层次，也是我们七层中最重要的一个层次。

**网络层的主要任务是：把 `分组` 从源端传到目的地，为分组交换网上的不同主机提供通信服务。**

**网络层传输单位是`数据报`。**

分组与数据报的关系，其实就像父与子的关系，数据报过长的时候就可以把数据报进行切割，切割成一个又一个小的分组，再放到链路上传递，这样就可以使我们在传输的过程中更加的灵活，而且消耗 / 损失也更小。

为分组交换网上的不同主机提供通信服务：也从一个方面表名了网络层非常重要的一个功能，可以实现不同主机之间的连通与通信。

接下来看看网络层四大功能。

功能一：路由选择

功能二：流量控制

功能三：差错控制

功能四：拥塞控制

---

### 2）功能

我们还是来结合两台主机进行通信的例子。

首先来看看什么是 `路由选择`。

#### 路由选择

顾名思义就是：选择合适的路由，因为发送端要发送一个数据报给接收端，此时它可以走上面的两个路由器。当然由于下面的地方也是连通的，因此也可以走下面这种方式，按具体选择哪一种方式，需要看我们当时的网络情况，而且要通过相应的路由算法来计算，选出一个最佳路径，最合适的一个路由方式，才能使这个分组从发送端正确到达接收端，这就是路由选择的过程。

<img src="./assets/image-20240606163522458.png" alt="image-20240606163522458" style="zoom: 43%;" />

---

#### 流量控制

在刚才传输层我们也讲过它其实就是要协调发送端和接收端的速度问题，假如说发送端发送的太快了，接收端来不及接收，它就要告诉发送端你慢点发，此时就是对于发送端速度的控制，也是我们流量控制的过程。

---

#### 差错控制

差错控制是通信两节点之间约定一些特定的规则，例如之后要学的机油校验码等等，接收方就会根据这个规则来检查我收到的分组有没有什么错，如果有错，能纠错就纠错，不能纠错，它就把这个分租扔掉，这样的话就可以确保上面的一个层次，也就是传输层所提交的数据都是没有问题的。

---

#### 拥塞控制

拥塞控制和流量控制有一点区别，流量控制我们主要是限制发送方的速度，但是拥塞控制是针对一个全局的、宏观上的来看，整体要控制一下速度。

拥塞控制主要指的就是：如果所有节点(包括主机和中间系统)都来不及接收分组，而要丢弃大量分组的话，那网络就会处于 `拥塞` 状态。因此要采取一定措施，缓解这种拥塞。

---

### 3）总结

最后总结一下网络层的几个协议：IP、IPX、ICMP、IGMP、ARP、RARP、OSPF，这些我们在网络层那一章就会具体的讲到，到时候大家再去理解这些协议都附有哪些功能。

<img src="./assets/image-20240606171744520.png" alt="image-20240606171744520" style="zoom:50%;" />

---

## 六、数据链路层

数据链路层作为网络层的下层，自然要为网络层提供服务，所以它的主要任务是把网络层传下来的数据报`组装成帧`。

`帧` 就是 `数据链路层`/`链路层` 的传输单位。

<img src="./assets/image-20240606175814793.png" alt="image-20240606175814793" style="zoom:50%;" />

### 功能一：成帧（定义帧的开始和结束）

链路层的第一个功能自然就是 `成帧`，在成帧的过程中会定义帧的开始和结束，也就是我们数据报组装成帧之后会形成一个比较长的比特流序列，所以我们对于这样一个比特流序列需要定义一下，在哪开始(帧的开始)，在哪帧的结束，也就是分别定义几种或两种这个帧的开始和结束的01组合，只有这样定义好我们才可以在接收端收到一个帧的时候，提取出这个帧的数据部分，进而上交给网络层，实现下一步的封装。

<img src="./assets/image-20240606173310728.png" alt="image-20240606173310728" style="zoom:67%;" />

---

### 功能二：差错控制 (帧错 + 位错)

这里的差错包括 `帧错` 或 `位错`，对于这两种错误，我们这个数据应用层都会有相应的检错或者是纠错的方法，如果发现有差错，数据链路层可能就会简单的丢弃差错的帧，以免继续在这个网络传下去浪费资源。如果需要改正数据呢，也就是说要纠错的话，就可以用一些可靠传输协议来纠正出现的差错。

所以说在这个差错控制这，可以检错也可以纠错，这个是要针对不同的错误的情况。

---

### 功能三：流量控制

我们在传输层和网络层都讲过，它是对于发送方和接收方一个速度的协调问题。

也就是说如果接收方那边的缓存不够用了，那再发来的数据全部都要丢弃掉，所以它就会告诉发送方：你慢点发，等我缓存有空间了，然后你再加快速度。

---

### 功能四：访问(接入)控制

主要是对于信道访问的控制。

首先呢我们这边有四个主机，他们都会连在这样一个传输介质 / 物理介质上面。如果在这个广播式网络当中，数据内存就要处理这种访问接入控制的问题了，就要控制一下哪台主机现在可以占用这样一个信道。

因为在广播式网络当中，同一时间只能有一个人在发送消息，其他人都是处于监听的状态。所以这个数据链路层它就是可以控制这样一个大家对于共享信道的问题，这是由它的一个特殊子层，也就是介质访问子层专门处理这个问题的。

<img src="./assets/image-20240606174842944.png" alt="image-20240606174842944" style="zoom:50%;" />

最后我们再来看看数据链路层的主要协议：SDLC、HDLC、PPP、STP，我们在之后的章节也会细讲。

---

### 总结

<img src="./assets/image-20240606175443772.png" alt="image-20240606175443772" style="zoom:50%;" />

---

## 七、网络层

### 1）介绍

接下来就到最后一个很简单的层次，也是我们之前提到过的傻瓜层物理层。

<img src="./assets/image-20240606175828376.png" alt="image-20240606175828376" style="zoom:50%;" />

之所以说网络层是傻瓜层，就是因为这个物理层的功能实在是太简单了，它只需要把这个比特流转成电信号的形式，然后放到链路上进行传输就ok了，不需要对我们这个数据有什么改动，也不需要对它有什么切割。

**所以物理层的主要任务是在 `物理媒体` 上实现比特流的 `透明传输`。**

**网络层传输单位是 `比特`。**

这个物理媒体可以是任何一种物理传输介质，例如同轴电缆、双绞线、无线电波等等。

**透明传输**：指不管所传输的数据是什么样的比特组合，我都相当于无视它一样，直接将它放到链路上传送。

即你给我什么，我就往外发什么，这就是物理层傻瓜的地方。

就好像我们这边收来了一系列的比特流，物理层只是单纯的把它们转换成电信号的形式，然后就放在链路上进行传播了，这就是透明传输的意思。

<img src="./assets/image-20240606180422487.png" alt="image-20240606180422487" style="zoom:67%;" />

---

### 2）功能

#### 功能一：定义接口特性

这个说法比较多，因为还有很多一些相关的特性，这里面我们就大概讲一下接口特性。

比如如我们要确定连接电缆的插头应该要多少根引脚，或者受每一条引脚应该如何连接，这都数据接口特性的部分了。

引脚：指在电缆连接器或电路板上突出的金属针脚，它们用于建立电气连接。

---

#### 功能二：定义传输模式

这里面传输模式有三种：单工、半双工、双工。

- 单工：指的是只可以单方向，也就是说如果两个人进行通信的话，只可以同一时间有一个人在发送，另一个人就是一直在接收的。这个是发送端和接收端完全确认好了。
- 半双工：看字面意思就知道，它是介于单工和双攻之间的一种通信方式。半双工就是说两个人都可以作为发送方和接收方，但是同一时间还是只能有一个人发送信息。就好像我们在用对讲机的时候，你同一时间只能有一个人在说话，那另外一个时间你这个人说完话了，还可以换别的人说话，所以发送端是两个人都可以的，但是同一时间之鞥呢有一个人在说话。
- 双工：自然就是两个人可以双向同时的说话，就好像我们打电话一样。

---

#### 功能三：定义传输速率

我们说的百兆网、十兆网，就是指我们这个发送端的发送速率，或者是传输速率，这都是物理层可以定义的。

---

#### 功能四：比特同步

比特同步指的就是：这边发送一个1，接收端就可以准确无误的接收到一个1，就是这种保证比特的同步，是需要一个适中的，这里面就不做展开讲解。

---

#### 功能五：比特编码

例如差分、慢切斯特编码，它主要就是把这个01规定一下，用什么样的电压表示1，什么样的电压表示0，这就是比特编码的意思。

---

### 3）总结

最后再总结一下常见的物理层的几个协议：Rj45、802.3，这个协议还是需要大家有一个印象，虽然考的几率不是很大，但是以防万一。

<img src="./assets/image-20240606181907437.png" alt="image-20240606181907437" style="zoom:67%;" />

---

## 八、思维导图总结

<img src="./assets/image-20240606181931632.png" alt="image-20240606181931632" style="zoom:67%;" />



---

# 1.2_4 TCP/IP参考模型

我们首先来回顾一下OSI七层参考模型，它是有这样一个架构，OSI参考模型我们之前有讲过，它跟 `TCP/IP参考模型` 的一个主要区别就是在于它是一个法定的标准，而 `TCP/IP` 是我们可以事实应用的一个事实的标准，原因主要就是在这个OSI它是一群老学者研究出来的一个参考模型，但是等他们研究出来的时候 `TCP/IP` 已经在市场上有运营了，所以OSI出来的就比较晚，在一个就是这些老学者它只是提出了这样一个架构，但是没有说到底应该怎么应用，因此这个OSI参考模型只是一个法定上的标准，也只是一个理论上的概念。

`TCP/IP参考模型` 它其实先诞生这样一个协议栈，然后我们再吧这个协议栈进行了一个分层，分层成了这样一个参考模型。

所以说OSI它是先理论，但是没有实践；而 `TCP/IP` 它是先有实践，然后才有这样一个参考模型的理论。

我们可以看到  `TCP/IP` 它有四层，自下而上分别是 `网络接口层`、`网际层`、`传输层`、`应用层`。

<img src="./assets/image-20240606193213621.png" alt="image-20240606193213621" style="zoom:50%;" />

`网络接口层` 其实是把 `数据链路层` 和 `物理层` 进行一个合并了，它表示的就是与物理网络的一个接口，但实际上 `TCP/IP` 它的参考模型本身没有具体的描述这样一个部分，只是指出主机必须通过某些协议与网络连接，然后才能够在网络上面传递这个分组ip，传递网络层的这样一个数据单元，具体的网络类型可以有多种多样，所以这个网络接口层它只是说相当于是一个接口，并没有具体规定它其中的一些细节等等。

最上面一层是网际层，它和网络层其实是差不多的功能，当然也是 `TCP/IP` 参考模型中最关键的部分，它的功能上面和OSI是非常相似的，就是将数据报吃啊分成分组发给任何的网络，并且进行一个路由的选择。

再网上看传输层跟OSI参考模型也是一样的，都是会实现一些端到端的，或者说进程与进程之间的通信。

最上面的是应用层，这里面的应用层是将表示层和会话层都纳入其中，形成一个比较大的层次，包含所有的高层协议，比如说FTP、DNS、邮件当中使用的SMGP等协议，都是我们这个 `TCP/IP` 所使用到的协议。当然，这就是把之前三层所用到的协议综合到一起，放到一块来说了。

怎么再来看一下 `TCP/IP` 的协议栈，因为我们知道先有了这样一些协议，才有的一个参考模型，我们来看一下它为什么叫做 `TCP/IP` 呢。

首先这是一个栈的结构大家都应该很清楚，我们在数据结构中有学过这样一层又一层的栈的结构。

我们可以看到自下而上分别是每一个层次所对应的一些协议。那在这个 `TCP/IP` 协议栈当中呢，TCP协议以及IP协议是我们这个协议栈的大头，非常常用的两个协议，所以这个协议栈因此得名 `TCP/IP` ，只是说这两个比较常用而已，当然这个协议栈不止包括这两个协议，它还包括各个层次的其他协议等。



----

# OSI参考模型与 `TCP/IP` 参考模型比较

## 一、相同点

1、这两个参考模型都是需要分层的，采用的是一个分层的体系结构，就会将一些庞大的计算机网络问题拆分成一个又一个小的问题，每一层负责解决一类的问题，这个就是分层的由来。

2、都是基于独立的协议栈的概念。这个看上节的图示应该就很清楚。

3、可以实现异构网络的互联。其实也可以说可以实现不同厂家生产的一些设备进行相同的通信，即可以将全世界的不同厂家生产的计算机联系起来，使它们的关系变得更加的亲密。

<img src="./assets/image-20240606205430839.png" alt="image-20240606205430839" style="zoom:50%;" />

---

## 二、不同点

1、OSI参考模型它定义了三点主要内容：服务、协议、接口。这个是与 `TCP/IP` 非常不同的一点。

2、OSI它是先出现的，参考模型会先于协议的发明，而不偏向特定的协议。但是我们刚才说 `TCP/IP` 它是先发明了协议，然后根据这些协议把 `TCP/IP` 的整个架构再归纳出来。

3、 `TCP/IP` 在设计之初就考虑到了易购网的`互联`问题，所以它将IP作为重要的层次，因为它设计之初主要就是想解决不同厂家的设备之间进行通信的问题，所以它对IP非常看重，因此我们就有了第四点

4、在网络层和传输层这两个层次上，OSI参考模型与 `TCP/IP` 参考模型它们的通信方式会有不同，这里面的通信主要由两种：`无连接的通信` 和 `面向连接的通信`。

**面向连接**分为三个阶段，第一是建立连接，在这个阶段会发出一个建立连接的请求。只有在连接之后，才能够开始数据的传输，这是第二阶段。最后一个阶段就是：当数据传输完毕，必须释放连接。而**面向无连接**没有那么多阶段，它直接进行数据传输。

---

首先我们知道网络层有一个非常重要的协议就是IP协议，这样一个协议是强调面向无连接的，也就是不需要建立连接的，所以这两个模型在网络层这块都有 `无连接通信`。

传输层我们说过是端到端，进程与进程之间的通信，所以我们这个传输层主要是为了实现可靠传输而存在的，那为了实现可靠的传输，要先建立好一个连接，所以说这个传输层在两个模型中都有 `面向连接`，那我们就解决了这个网络层的一部分，以及传输层的一部分。

接下来我们再结合第三句话说： `TCP/IP` 在设计之初就考虑到了易购网的`互联`问题，所以它将IP作为重要的层次，因此它特别看重网络层的一个IP协议，所以它特别看重这个无连接的通信方式，因此 `TCP/IP` 模型在网络层只有无连接。

我们可以这样记：网络层和传输层对角线的地方它们都是两个都有的 `无连接 和 面向连接`，而  `TCP/IP` 模型在网络层格外看重IP协议，所以它在网络层是无连接，剩下一个空就是面向连接了，就有一种填空的感觉。

![image-20240606205440524](./assets/image-20240606205440524.png)

---

# 5层参考模型

## 一、引入

这5层参考模型其实是综合了OSI以及 `TCP/IP` 的优点，OSI当中每一个层次具体的具体的功能都说的很清晰，所以它把把这一点拿过来了。 `TCP/IP` 它是层次比较简单，只有四层，而且层与层之间没有什么太多功能的交叉，所以这个是 `TCP/IP` 的优点，把它俩综合在一起就形成了这样一个我们在计算机考研中通用的参考模型。

<img src="./assets/image-20240606205851944.png" alt="image-20240606205851944" style="zoom:67%;" />

---

## 二、封装和解封装

针对5层的参考模型，我们的数据在传输的过程中是要进行一个怎么样的封装和解封装的过程呢？

其实AB两台主机通信，中间一定要有一些中间系统，例如路由器、交换机等等，在这里我们就把它先忽略掉了，因为在这两种中间系统当中进行数据的封装和解封装的过程，其实在主机上都是一样的。

首先对于主机上面的一些数据应用层会加一定的控制信息，然后这个控制信息形成的这样一个传输单元就叫做 `报文`，接下来把这个报文切分成段，切分成段之后就放到传输层上面进行传输，再加上传输层的控制协议，因此就形成了一个个的报文段。

接下来这个报文段再到这个网络层的地方，就是把这样一个数据单元再加上网络层的控制信息，加上网络层的头部形成了一个数据报。那当然如果数据报过长的时候我们可以给它进行一个切分，分成分组。

对于这个数据报，接下来到链路层的时候就要给它成帧了，将数据报组成帧，并且在这个头和尾的地方加上链路层的控制信息（头部的控制信息以及尾部的控制信息），它形成的这样一个传递的单元就叫做帧。

对于这个帧网络层就不去再加什么其他的控制信息了，直接就把它转成比特流的形式，传输单元就是比特，然后把这样一个比特流放在链路上进行传输，传输到这个端系统，或者是传输到中间系统的时候，就要先进行一个解封装的过程，也就是进行一个还原的过程。

拿到网络层呢就是这样一个比特流序列，到链路层的时候就可以还原成啦啦操的这样一个帧的形式，接下来就把这个控制信息脱掉，脱掉之后就剩下这个网络层的数据以及它的控制信息。

那在这个地方网络层识别出来它的控制信息后，再把网络层的首部脱掉，剩下的就是传输层的这样一个协议数据单元。

那接下来再把传输层的这个控制信息去掉，剩下的就是应用层的这样一个传输单元。

再把应用层的控制信息去掉之后就返回给主机B了，最后我收到什么样的数据就是对应的DATA。

![image-20240606212919720](./assets/image-20240606212919720.png)

关于5层参考模型的数据封装与解封装过程其实跟之前OSI7层的结构都是差不多的，就像我们这个快递的打包与拆包的过程一样。



---

# 分层结构总结

相同点：包括都是分层结构，同时呢每个模型都有各自独立层次的协议栈。

不同点：5层参考模型是融合了这两者的优点。

另一个考点：就是上面两个模型的不同点。

<img src="./assets/image-20240606213107149.png" alt="image-20240606213107149" style="zoom:50%;" />



----

# 第一章总结

![image-20240606213945771](./assets/image-20240606213945771.png)



---

# -----------------------------------------

# 2.1_1 物理层基本概念

## 一、物理层接口特性

### 1）介绍

**物理层主要解决如何在连接各种计算机的传输媒体上 `传输数据比特流`，而不是指具体的传输媒体。**

这个传输媒体就是刚才所讲的传输介质，包括**导向型**和**非导向性**。

这个传输媒体 / 传输介质，也有人称之为是这个网络体系结构当中的第0层，也就是说我们要区分开这些传输媒体其实并不属于物理层，那到底什么属于物理层呢？

物理层主要任务：确定与传输媒体`接口`有关的一些特性。所以说物理层它主要定义的是一些接口的相关特性，那确定与接口有关的一些特性，这个过程其实我们也在定义额一种标准。

举个例子：这里有一个插排，插排上面有两孔也有三孔，这其实就是在定义接口上的标准，只有定义了这些标准，我们手机没电的时候才可以把充电器充在任何一个插排之上。

<img src="./assets/image-20240606215558888.png" alt="image-20240606215558888" style="zoom:67%;" />

其次呢，还有这样一个例子，例如我们家里的有线路由器。有线路由器后面都会有很多插孔，这些插孔具体来讲是连到广域网又连到局域网的，但是大家可以发现，你和你朋友家的路由器它后面的插孔形状应该是一样的，而且你们的网线的接头应该也是一样的，这些其实也是在定义物理层接口上的一些特性的标准。

只有定义这些标注你，当你把你家里的网线拿到你朋友家里去上网的时候，你才可以无缝衔接的插入到别人家的路由器上面。

<img src="./assets/image-20240606215840432.png" alt="image-20240606215840432" style="zoom:50%;" />

接下来就来看一下物理层所定义的一些接口特性。

---

### 1、机械特性

机械特性：定义物理连接的特性，规定物理连接时所采用的规格、接口形状、**引线数目、引脚数量**和排列情况。

其实就是我们刚才所讲的插排和网线的例子。

<img src="./assets/image-20240606220033174.png" alt="image-20240606220033174" style="zoom:67%;" />

---

### 2、电气特性

电信特性：



















